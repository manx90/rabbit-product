import{u as h,C as j,a as C,j as s,L as v,P as y}from"./index-D1jvr3vn.js";import{u as w}from"./useCategoryProducts-D1XG1D4t.js";import"./vendor-CbIZvbuk.js";const $=r=>h({queryKey:["subcategories",r],queryFn:async()=>{if(!r)return[];const a=await j.getOne(r);return((a==null?void 0:a.subCategories)||[]).map(t=>({id:t.id||t._id||t,name:t.name||t}))},enabled:!!r,staleTime:60*60*1e3});function D(){const{categoryId:r,subcategoryId:a}=C(),{data:d=[],isLoading:t,error:c}=$(r),{data:o=[],isLoading:m,error:g}=w(r,a);console.log(o);const x=t||m,l=c||g;return console.log("CategoryPage Debug:",{categoryId:r,subcategoryId:a,products:o,productsLoading:m,productsError:g,subcategories:d,subcategoriesLoading:t,subcategoriesError:c}),s.jsx(s.Fragment,{children:s.jsxs("div",{className:"lg:mx-24",children:[s.jsx("div",{dir:"rtl",className:"px-4",children:s.jsx("div",{className:"custom-scrollbar flex flex-row gap-2 overflow-x-auto px-4 py-2 lg:justify-center lg:px-0",children:d.map(e=>s.jsx(v,{to:`/category/${r}/${e.id}`,className:`min-w-fit max-w-fit self-auto rounded-[12px] border px-4 py-2 text-[13px] transition-colors ${a===String(e.id)?"border-blue-500 bg-blue-50 text-blue-500":"border-gray-300 hover:border-blue-500 hover:text-blue-500"}`,children:e.name},`${r}-${e.id}`))})}),s.jsx("div",{className:"m-auto grid w-fit grid-cols-2 items-center justify-center gap-2 p-1 md:flex md:flex-wrap",children:x?s.jsx("div",{className:"w-full text-center",children:"جاري تحميل المنتجات..."}):l?s.jsx("div",{className:"w-full text-center text-red-500",children:(l==null?void 0:l.message)||"فشل في جلب المنتجات."}):o.length===0?s.jsx("div",{className:"w-full text-center",children:"لا توجد منتجات في هذا القسم."}):o.map((e,b)=>{var p;let i=e.imgCover;typeof i=="string"&&i.startsWith("https://api.rabbit.ps/uploads")&&(i=i.replace("https://api.rabbit.ps/uploads",""));const f=((p=e.colors)==null?void 0:p.map(n=>{var u;return{...n,imgColor:(u=n.imgColor)!=null&&u.startsWith("https://api.rabbit.ps/uploads")?n.imgColor.replace("https://api.rabbit.ps/uploads",""):n.imgColor}}))||[];return s.jsx(y,{id:e.id,name:e.name,price:e.price,imgCover:i,colors:f,sizeDetails:e.sizeDetails},e.id||b)})})]})})}export{D as default};
