const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/CategoryPage-CECf8OHy.js","assets/vendor-CUEbPlo7.js","assets/utils-Dpy6SecU.js","assets/useCategoryProducts-Croo7F_K.js","assets/router-CHW3atcw.js","assets/ui-components-COOuEkzG.js","assets/forms-C74EBmA-.js","assets/ProductPage-4LxuH352.js","assets/FavoritePage-aW5jUBFc.js"])))=>i.map(i=>d[i]);
var Ee=Object.defineProperty;var Pe=(t,r,a)=>r in t?Ee(t,r,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[r]=a;var y=(t,r,a)=>Pe(t,typeof r!="symbol"?r+"":r,a);import{j as e,r as m,H as xe,b as Ae,u as U,P as te,F as _,d as de,e as _e,f as ge,M as Me,g as Re,R,h as De,i as Be,k as Oe,l as Qe,I as He,m as Ve,S as We,n as Ue,o as Ke,p as Xe,q as Ze,C as Je,s as Ge,t as Ye,B as et,v as tt,w as rt,x as at,y as we,z as st,Q as ot,A as nt,D as it,E as lt,G as ct}from"./vendor-CUEbPlo7.js";import{u as Ne,L as K,a as ke,B as dt,R as ut,b as Z}from"./router-CHW3atcw.js";import{u as ce,T as mt,c as xt,a as gt}from"./ui-components-COOuEkzG.js";import{u as Ce,C as pt,F as ht}from"./forms-C74EBmA-.js";import"./utils-Dpy6SecU.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const i of n.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&o(i)}).observe(document,{childList:!0,subtree:!0});function a(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerPolicy&&(n.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?n.credentials="include":s.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function o(s){if(s.ep)return;s.ep=!0;const n=a(s);fetch(s.href,n)}})();const ft="modulepreload",yt=function(t){return"/"+t},pe={},ue=function(r,a,o){let s=Promise.resolve();if(a&&a.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),l=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));s=Promise.allSettled(a.map(c=>{if(c=yt(c),c in pe)return;pe[c]=!0;const d=c.endsWith(".css"),u=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const h=document.createElement("link");if(h.rel=d?"stylesheet":ft,d||(h.as="script"),h.crossOrigin="",h.href=c,l&&h.setAttribute("nonce",l),document.head.appendChild(h),d)return new Promise((x,f)=>{h.addEventListener("load",x),h.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${c}`)))})}))}function n(i){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=i,window.dispatchEvent(l),!l.defaultPrevented)throw i}return s.then(i=>{for(const l of i||[])l.status==="rejected"&&n(l.reason);return r().catch(n)})},bt=()=>e.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",width:"100%"},children:[e.jsx("div",{style:{width:"50px",height:"50px",border:"5px solid #f3f3f3",borderTop:"5px solid #3498db",borderRadius:"50%",animation:"spin 1s linear infinite"}}),e.jsx("style",{children:`
          @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
          }
        `})]});function jt(){const{pathname:t}=Ne();return m.useEffect(()=>{window.scrollTo(0,0)},[t]),null}const vt=async t=>{try{const r=t.match(/\/product\/(\d+)/);if(!r)return null;const a=r[1],o=await fetch(`https://api.rabbit.ps/api/products/${a}`);return o.ok?await o.json():null}catch(r){return console.error("Error fetching product:",r),null}},wt=t=>{var i,l,c,d;if(!t)return null;const r=t.name||"منتج",a=t.description||`اكتشف ${r} في متجر الأرانب. أفضل الأسعار والجودة المضمونة`,o=t.price||((l=(i=t.sizeDetails)==null?void 0:i[0])==null?void 0:l.price)||0,n=`https://api.rabbit.ps/uploads/${t.imgCover||((d=(c=t.colors)==null?void 0:c[0])==null?void 0:d.imgColor)||"product.png"}`;return{title:`${r} - Rabbit Store | متجر الأرانب`,description:a,keywords:`${r}, منتج, تسوق, متجر الأرانب, ${o} جنيه`,ogTitle:`${r} - Rabbit Store`,ogDescription:a,ogImage:n,ogType:"product",twitterTitle:`${r} - Rabbit Store`,twitterDescription:a,twitterImage:n,productPrice:o,productImage:n}},Nt=t=>{const r=`${t} - Rabbit Store | متجر الأرانب`,a=`اكتشف أفضل منتجات ${t} في متجر الأرانب. مجموعة واسعة من المنتجات بأسعار مميزة`;return{title:r,description:a,keywords:`${t}, منتجات, تسوق, متجر الأرانب, فئة`,ogTitle:r,ogDescription:a,ogImage:"/herosec.jpg",ogType:"website",twitterTitle:r,twitterDescription:a,twitterImage:"/herosec.jpg"}},ee=()=>({title:"Rabbit Store - متجر الأرانب",description:"متجر الأرانب - أفضل المنتجات بأسعار مميزة",keywords:"متجر, منتجات, أرانب, تسوق, online shopping",ogTitle:"Rabbit Store - متجر الأرانب",ogDescription:"متجر الأرانب - أفضل المنتجات بأسعار مميزة",ogImage:"/herosec.jpg",ogType:"website",twitterTitle:"Rabbit Store - متجر الأرانب",twitterDescription:"متجر الأرانب - أفضل المنتجات بأسعار مميزة",twitterImage:"/herosec.jpg"}),kt=()=>{const t=Ne(),[r,a]=m.useState(ee()),[o,s]=m.useState(!1);return m.useEffect(()=>{(async()=>{s(!0);try{const i=window.location.href;if(t.pathname.startsWith("/product/")){const l=await vt(i);if(l){const c=wt(l);a(c)}else a(ee())}else if(t.pathname.startsWith("/category/")){const l=t.pathname.split("/").pop()||"فئة",c=Nt(l);a(c)}else a(ee())}catch(i){console.error("Error updating meta tags:",i),a(ee())}finally{s(!1)}})()},[t.pathname]),o?e.jsx(xe,{children:e.jsx("title",{children:"Loading..."})}):e.jsxs(xe,{children:[e.jsx("title",{children:r.title}),e.jsx("meta",{name:"description",content:r.description}),e.jsx("meta",{name:"keywords",content:r.keywords}),e.jsx("meta",{property:"og:title",content:r.ogTitle}),e.jsx("meta",{property:"og:description",content:r.ogDescription}),e.jsx("meta",{property:"og:type",content:r.ogType}),e.jsx("meta",{property:"og:site_name",content:"Rabbit Store"}),e.jsx("meta",{property:"og:locale",content:"ar_AR"}),e.jsx("meta",{property:"og:url",content:window.location.href}),e.jsx("meta",{property:"og:image",content:r.ogImage}),e.jsx("meta",{property:"og:image:width",content:"800"}),e.jsx("meta",{property:"og:image:height",content:"800"}),e.jsx("meta",{property:"og:image:alt",content:r.ogTitle}),r.productPrice&&e.jsxs(e.Fragment,{children:[e.jsx("meta",{property:"product:price:amount",content:r.productPrice}),e.jsx("meta",{property:"product:price:currency",content:"EGP"})]}),e.jsx("meta",{name:"twitter:card",content:"summary_large_image"}),e.jsx("meta",{name:"twitter:site",content:"@rabbitstore"}),e.jsx("meta",{name:"twitter:title",content:r.twitterTitle}),e.jsx("meta",{name:"twitter:description",content:r.twitterDescription}),e.jsx("meta",{name:"twitter:image",content:r.twitterImage}),e.jsx("meta",{name:"twitter:image:alt",content:r.twitterTitle}),e.jsx("meta",{name:"theme-color",content:"#3B82F6"}),e.jsx("meta",{name:"robots",content:"index, follow"}),e.jsx("link",{rel:"canonical",href:window.location.href}),r.productPrice&&e.jsx("script",{type:"application/ld+json",children:JSON.stringify({"@context":"https://schema.org","@type":"Product",name:r.ogTitle.replace(" - Rabbit Store",""),description:r.ogDescription,image:r.ogImage,url:window.location.href,brand:{"@type":"Brand",name:"Rabbit Store"},offers:{"@type":"Offer",price:r.productPrice,priceCurrency:"EGP",availability:"https://schema.org/InStock",seller:{"@type":"Organization",name:"Rabbit Store"}},aggregateRating:{"@type":"AggregateRating",ratingValue:"4.5",reviewCount:"100"}})})]})},p=Ae.create({baseURL:"https://api.rabbit.ps",headers:{referrerPolicy:"unsafe-url",AccessControlAllowOrigin:"*"}});p.interceptors.request.use(t=>{const r=localStorage.getItem("token");return r&&(t.headers.Authorization=`Bearer ${r}`),t},t=>Promise.reject(t));p.interceptors.response.use(t=>t.data,t=>t.response?(console.error("Response Error:",t.response.data),Promise.reject(t.response.data)):t.request?(console.error("Request Error:",t.request),Promise.reject(new Error("No response received from server"))):(console.error("Error:",t.message),Promise.reject(t)));const D="/category";var L;let Se=(L=class{},y(L,"getAll",r=>p.get(`${D}/active`,{params:r})),y(L,"getOne",r=>p.get(`${D}/${r}`)),y(L,"getSubCategory",()=>p.get(`${D}/subCategory`)),y(L,"createCategory",r=>p.post(D,r,{headers:{"Content-Type":"application/json"}})),y(L,"createSubCategory",r=>p.post(`${D}/subCategory`,r,{headers:{"Content-Type":"application/json"}})),y(L,"updateCategory",(r,a)=>p.put(`${D}/${r}`,a,{headers:{"Content-Type":"application/json"}})),y(L,"updateSubCategory",(r,a)=>p.put(`${D}/subCategory/${r}`,a,{headers:{"Content-Type":"application/json"}})),y(L,"deleteOneCategory",r=>p.delete(`${D}/${r}`)),y(L,"deleteOneSubCategory",r=>p.delete(`${D}/subCategory/${r}`)),L);const $e=()=>U({queryKey:["categories"],queryFn:async()=>{const t=await Se.getAll();return(t==null?void 0:t.data)||[]},staleTime:10*60*1e3,retry:2}),Ct=()=>{const{data:t=[],isLoading:r,error:a}=$e();return e.jsxs(e.Fragment,{children:[e.jsx("style",{jsx:!0,children:`
        @keyframes fadeInUp {
          from {
            opacity: 0;
            transform: translateY(20px);
          }
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }

        @keyframes pulse {
          0%,
          100% {
            opacity: 1;
          }
          50% {
            opacity: 0.5;
          }
        }

        .category-pulse {
          animation: pulse 2s infinite;
        }
      `}),e.jsxs("div",{className:"relative hidden overflow-hidden border-b border-gray-200 bg-gradient-to-r from-white via-blue-50 to-white shadow-sm dark:border-gray-700 dark:from-gray-800 dark:via-gray-900 dark:to-gray-800 lg:flex",children:[e.jsx("div",{className:"absolute inset-0 opacity-5 dark:opacity-10",children:e.jsx("div",{className:"absolute left-0 top-0 h-full w-full bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500"})}),e.jsx("div",{className:"container relative z-10 mx-auto px-4",children:e.jsx("div",{className:"mx-auto flex max-w-screen-xl flex-row-reverse flex-wrap items-center justify-center gap-6 py-3",style:{height:"65px"},children:e.jsx("div",{className:"flex flex-wrap items-center justify-center gap-2",children:r?e.jsxs("div",{className:"flex items-center gap-3 rounded-full bg-blue-50 px-4 py-2 dark:bg-blue-900/20",children:[e.jsx("div",{className:"h-5 w-5 animate-spin rounded-full border-2 border-blue-500 border-t-transparent"}),e.jsx("span",{className:"text-sm font-medium text-blue-600 dark:text-blue-400",children:"جاري تحميل الأقسام..."})]}):a?e.jsxs("div",{className:"flex items-center gap-2 rounded-full bg-red-50 px-4 py-2 dark:bg-red-900/20",children:[e.jsx("svg",{className:"h-4 w-4 text-red-500",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),e.jsx("span",{className:"text-sm font-medium text-red-600 dark:text-red-400",children:"خطأ في تحميل الأقسام"})]}):t.map((o,s)=>e.jsxs(K,{to:`/category/${o.id||o._id}`,className:"group relative rounded-full px-4 py-2 text-sm font-medium text-gray-700 transition-all duration-300 hover:scale-105 hover:bg-blue-100 hover:text-blue-700 hover:shadow-md dark:text-gray-200 dark:hover:bg-blue-900/30 dark:hover:text-blue-300",style:{animationDelay:`${s*100}ms`,animation:"fadeInUp 0.6s ease-out forwards"},children:[e.jsx("span",{className:"relative z-10 text-xl",children:o.name}),e.jsx("div",{className:"absolute inset-0 rounded-full bg-gradient-to-r from-blue-500 to-purple-500 opacity-0 transition-opacity duration-300 group-hover:opacity-10"}),e.jsx("div",{className:"absolute -bottom-1 left-1/2 h-0.5 w-0 -translate-x-1/2 transform bg-gradient-to-r from-blue-500 to-purple-500 transition-all duration-300 group-hover:w-3/4"})]},o.id||o._id))})})})]})]})};function Ie({Menubar:t,setMenubar:r}){const[a,o]=m.useState(!1),[s,n]=m.useState(null),{data:i,isLoading:l,error:c}=$e();console.log(i);const d=u=>{n(h=>h===u?null:u)};return e.jsxs("div",{className:"fixed right-0 top-0 z-50 mt-[58px] flex h-screen w-[80%] flex-col bg-white shadow-2xl transition-all duration-700 ease-in-out dark:bg-[#18181b]",style:{transform:t?"translateX(0)":"translateX(100%)"},children:[l?e.jsx("div",{className:"flex h-full items-center justify-center",children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx("div",{className:"h-10 w-10 animate-spin rounded-full border-4 border-[#0095FF] border-t-transparent"}),e.jsx("span",{className:"font-Lato text-sm tracking-wide text-gray-500",children:"جاري تحميل الأقسام..."})]})}):c?e.jsx("div",{className:"flex h-full items-center justify-center",children:e.jsxs("div",{className:"flex flex-col items-center gap-4 text-center",children:[e.jsx("div",{className:"animate-bounce text-5xl text-red-500",children:"⚠️"}),e.jsx("span",{className:"font-Lato text-lg font-semibold text-red-500",children:"حدث خطأ في تحميل الأقسام"}),e.jsx("span",{className:"font-Lato text-sm text-gray-500",children:c.message})]})}):Array.isArray(i)&&i.length>0?i.map((u,h)=>e.jsxs("div",{className:"group overflow-hidden rounded-md transition-shadow duration-300 hover:shadow-lg",children:[e.jsxs("button",{onClick:()=>{d(u.id)},className:`flex w-full flex-row-reverse items-center justify-between border-b border-[#E6F0FA] bg-gradient-to-l from-[#f7fbff] via-white to-[#f7fbff] p-5 text-right font-Lato transition-colors duration-300 focus:outline-none dark:border-[#1a2630] dark:from-[#1a2630] dark:via-[#18181b] dark:to-[#1a2630] ${s===u.id?"bg-[#f0f8ff] shadow-inner dark:bg-[#1a2630]":"hover:bg-[#e6f4ff] dark:hover:bg-[#232326]"}`,style:{boxShadow:s===u.id?"0 4px 16px 0 rgba(0, 149, 255, 0.12)":void 0},children:[e.jsx("span",{className:"my-auto font-Lato text-[17px] font-medium text-black transition-colors duration-200 group-hover:text-[#0095FF] dark:text-white dark:group-hover:text-[#0095FF]",children:u.name||"قسم"}),e.jsx("span",{className:`inline-block transition-transform duration-300 ${s===u.id?"rotate-90 text-[#0095FF]":"text-gray-400 dark:text-gray-500"}`,children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 18 18",fill:"none",className:"mr-2",children:e.jsx("path",{d:"M12 16.5001L4.50003 9.00006L12 1.50006L13.3313 2.83131L7.16253 9.00006L13.3313 15.1688L12 16.5001Z",fill:s===u.id?"#0095FF":"currentColor"})})})]}),s===u.id&&e.jsx("div",{className:"animate-fadeIn border-b border-[#E6F0FA] bg-gradient-to-l from-[#f7fbff] via-[#fdfefe] to-[#fff] dark:border-[#1a2630] dark:from-[#1a2630] dark:via-[#232326] dark:to-[#18181b]",children:u.subCategories&&u.subCategories.length>0?u.subCategories.map((x,f)=>e.jsxs(K,{onClick:()=>{r(!1)},to:`/category/${u.id}/${x.id}`,className:"relative block px-10 py-3 text-right font-Lato text-[15px] text-gray-700 transition-all duration-200 hover:bg-[#d0eaff] hover:pl-12 dark:text-gray-200 dark:hover:bg-[#232326]",children:[e.jsx("span",{className:"relative z-10",children:x.name||"قسم فرعي"}),f===0&&e.jsx("span",{className:"absolute left-4 top-1/2 h-2 w-2 -translate-y-1/2 animate-ping rounded-full bg-[#0095FF] opacity-70"})]},x.id)):e.jsx(K,{to:`/category/${u.id}`,className:"relative block px-10 py-3 text-right font-Lato text-[15px] text-gray-700 transition-all duration-200 hover:bg-[#d0eaff] hover:pl-12 dark:text-gray-200 dark:hover:bg-[#232326]",children:e.jsx("span",{className:"relative z-10",children:"عرض جميع المنتجات"})})})]},u.id||h)):e.jsx("div",{className:"flex h-full items-center justify-center font-Lato text-lg text-gray-400 dark:text-gray-500",children:"لا توجد أقسام متاحة حاليا"}),e.jsx(St,{Subside:a})]})}function St({Subside:t}){return e.jsxs("div",{className:"flex flex-col rounded-t-lg bg-[#f9fcff] text-right shadow-md transition-all duration-300 ease-in-out dark:bg-[#18181b]",style:{display:t?"flex":"none",opacity:t?1:0,transform:t?"translateX(0)":"translateX(-100%)",transitionProperty:"opacity, transform"},children:[e.jsx("a",{href:"",className:"my-auto border-b border-[#EFEFEF] px-10 py-5 font-Lato text-[16px] text-black hover:bg-[#e6f4ff] dark:text-gray-200 dark:hover:bg-[#232326]",children:"العربية"}),e.jsx("a",{href:"",className:"my-auto px-10 py-5 font-Lato text-[16px] text-black hover:bg-[#e6f4ff] dark:text-gray-200 dark:hover:bg-[#232326]",children:"English"})]})}const $t="/collections";class qe{}y(qe,"getCollection",async()=>{const r=await p.get($t);return console.log(r),r});function It(){return U({queryKey:["collection"],queryFn:async()=>await qe.getCollection()})}function Y({name:t,all:r,idCat:a,idSub:o}){return e.jsx("div",{className:"my-[12px] border border-b-blue-400",children:e.jsx(me,{idCat:a,idSub:o,name:t,all:r})})}Y.propTypes={name:te.string.isRequired,all:te.bool};Y.defaultProps={all:!0};function me({idCat:t,idSub:r,name:a,all:o}){const s=r?`/category/${t}/${r}`:`/category/${t}`;return e.jsxs("div",{className:"flex items-center justify-between px-[12px] py-[8px]",children:[e.jsxs(K,{to:s,className:"flex items-center gap-[4px]",children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",children:[e.jsx("mask",{id:"mask0_1935_3170",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:"0",y:"0",width:"18",height:"18",children:e.jsx("rect",{width:"18",height:"18",fill:"#D9D9D9"})}),e.jsx("g",{mask:"url(#mask0_1935_3170)",children:e.jsx("path",{d:"M12 16.5001L4.5 9.00006L12 1.50006L13.3313 2.83131L7.1625 9.00006L13.3313 15.1688L12 16.5001Z",fill:"#0095FF"})})]}),e.jsx("span",{className:"font-Lato text-[#0095FF]",children:o&&"شاهد الكل"})]}),e.jsx("span",{className:"font-Lato",children:a})]})}me.propTypes={name:te.string.isRequired,all:te.bool};me.defaultProps={all:!0};const $=_.div`
	flex flex-row gap-2 ;
`,N=_.div`
	flex flex-col gap-2 ;
`,qt=_.div`
	min-h-[450px] snap-x flex gap-2 flex-row-reverse overflow-x-auto scroll-smooth p-[4px] w-full custom-scrollbar ;
`,ze=_.div`
	relative w-full max-w-[180px] min-h-[320px] max-h-[450px] p-2 gap-2 flex flex-col justify-between bg-[#231f1f08] dark:bg-gradient-to-br dark:from-gray-900 dark:to-gray-800 dark:shadow-lg shadow-sm rounded-md border border-transparent dark:border-gray-700  flex-shrink-0  hover:shadow-md  overflow-hidden;
`,zt=_.div`
	flex snap-x  gap-1 flex-row-reverse p-[4px] custom-scrollbar overflow-x-auto
`,Ft=_.img`
	 h-[200px] w-full object-contain hover:scale-[1.05] transition-all duration-300 drop-shadow-md dark:drop-shadow-[0_2px_8px_rgba(0,0,0,0.7)] ${t=>t.imageloaded==="true"?"opacity-100":"opacity-0"}
`,Lt=_.span`
	font-Lato text-right text-[14px] md:text-[18px]  text-black dark:text-white overflow-hidden text-ellipsis font-normal leading-normal whitespace-nowrap ;
`,Tt=_.button`
	bg-[#fefefe]  dark:bg-blue-700 w-full p-[4px] flex  border-1 border-[#ecebebf0] dark:border-blue-800 items-center justify-center gap-[4px] hover:dark:bg-blue-600 flex-row-reverse rounded-sm mx-auto shadow  transition-colors group ;
`,Et=_.div`
	p-2
	w-full
	text-white
	hover:bg-blue-500
	rounded-sm
	cursor-pointer
	transition-colors
	duration-300
`,re="cart",Pt=1e3*60*60,At=()=>{const t=localStorage.getItem(re);if(t)try{const{data:r,timestamp:a}=JSON.parse(t);if(Date.now()-a<Pt)return r;localStorage.removeItem(re)}catch(r){console.error("Error parsing cart from localStorage",r)}return[]},B=t=>{t.length>0?localStorage.setItem(re,JSON.stringify({data:t,timestamp:Date.now()})):localStorage.removeItem(re)},_t={items:At()},Fe=de({name:"cart",initialState:_t,reducers:{addItem:(t,r)=>{const a=r.payload,o=t.items.find(s=>s.productId===a.productId&&s.sizeName===a.sizeName&&s.colorName===a.colorName);if(console.log("AddItem Debug:",{productId:a.productId,sizeName:a.sizeName,colorName:a.colorName,quantity:a.quantity,qty:a.qty}),o)o.qty+=a.qty;else{const s={...a,isFavorite:a.isFavorite||!1};t.items.push(s)}B(t.items)},removeItem:(t,r)=>{const{productId:a,sizeName:o,colorName:s}=r.payload;t.items=t.items.filter(n=>!(n.productId===a&&n.sizeName===o&&n.colorName===s)),B(t.items)},removeItemByIndex:(t,r)=>{const a=r.payload;a>=0&&a<t.items.length&&(t.items.splice(a,1),B(t.items))},changeQty:(t,r)=>{const{productId:a,sizeName:o,colorName:s,qty:n}=r.payload;if(n<1)return;const i=t.items.find(l=>l.productId===a&&l.sizeName===o&&l.colorName===s);if(i){const l=i.quantity||999,c=Math.min(n,l);i.qty=c}B(t.items)},updateItemQuantity:(t,r)=>{const{index:a,qty:o}=r.payload;if(!(o<1)&&a>=0&&a<t.items.length){const s=t.items[a],n=s.quantity||999,i=Math.min(o,n);console.log("UpdateItemQuantity Debug:",{requestedQty:o,maxQuantity:n,finalQty:i,itemQuantity:s.quantity,itemQty:s.qty}),t.items[a].qty=i,B(t.items)}},updateItemSize:(t,r)=>{const{index:a,size:o}=r.payload;a>=0&&a<t.items.length&&(t.items[a].sizeName=o,B(t.items))},updateItemColor:(t,r)=>{const{index:a,color:o}=r.payload;a>=0&&a<t.items.length&&(t.items[a].colorName=o,B(t.items))},clearCart:t=>{t.items=[],B(t.items)},toggleItemFavorite:(t,r)=>{const{index:a}=r.payload;a>=0&&a<t.items.length&&(t.items[a].isFavorite=!t.items[a].isFavorite,B(t.items))}}}),{addItem:Mt,removeItem:Rt,removeItemByIndex:Dt,changeQty:Bt,updateItemQuantity:Ot,updateItemSize:Qt,updateItemColor:Ht,clearCart:Vt,toggleItemFavorite:Wt}=Fe.actions,Ut=t=>t.cart.items,Kt=t=>t.cart.items.reduce((r,a)=>r+a.qty,0),Xt=Fe.reducer,se=()=>{const t=_e(),r=ge(Ut),a=ge(Kt);return{items:r,totalQty:a,addItem:o=>t(Mt(o)),removeItem:(o,s,n)=>t(Rt({productId:o,sizeName:s,colorName:n})),removeItemByIndex:o=>t(Dt(o)),changeQty:(o,s,n,i)=>t(Bt({productId:o,sizeName:s,colorName:n,qty:i})),updateItemQuantity:(o,s)=>t(Ot({index:o,qty:s})),updateItemSize:(o,s)=>t(Qt({index:o,size:s})),updateItemColor:(o,s)=>t(Ht({index:o,color:s})),toggleItemFavorite:o=>t(Wt({index:o})),clearCart:()=>t(Vt())}},Zt=m.memo(function({product:r,photo:a,priceDisplay:o,colors:s,sizes:n,selectedColor:i,selectedSize:l,quantity:c,maxQty:d,isCurrentCombinationAvailable:u,getImagePath:h,onColorSelect:x,onSizeSelect:f,onQuantityChange:C,onAddToCart:j,onClose:S}){const{register:k,handleSubmit:z,watch:b,setValue:M,formState:{errors:E}}=Ce({defaultValues:{color:i,size:l,quantity:c}}),v=b("quantity"),P=b("color"),I=b("size");m.useEffect(()=>{P&&P!==i&&x(s.find(g=>g.name===P))},[P,i,x,s]),m.useEffect(()=>{I&&I!==l&&f(I)},[I,l,f]),m.useEffect(()=>{v&&v!==c&&C(v)},[v,c,C]);const O=g=>{!u||d===0||(console.log(g),j())},H=g=>{g.isAvailable&&(M("color",g.name),x(g))},X=g=>{g.isAvailable&&(M("size",g.size),f(g.size))},V=g=>{const F=Math.max(1,Math.min(d,g));M("quantity",F),C(F)};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm dark:bg-black/70",onClick:S,onMouseDown:S,children:e.jsxs("div",{dir:"rtl",className:"animate-fade-in relative mx-4 flex max-h-[90vh] flex-col gap-4 overflow-y-auto rounded-2xl bg-white p-2 shadow-2xl dark:bg-gray-900 sm:p-4 md:p-6 lg:mx-0 lg:min-w-[400px]",onClick:g=>g.stopPropagation(),onMouseDown:g=>g.stopPropagation(),children:[e.jsx("button",{type:"button",className:"group absolute left-3 top-3 z-10 flex h-8 w-8 items-center justify-center rounded-full text-gray-400 transition-all duration-200 hover:bg-gray-100 hover:text-red-500 dark:hover:bg-gray-800",onClick:S,"aria-label":"إغلاق",children:e.jsx("svg",{className:"h-5 w-5 transition-transform duration-200 group-hover:scale-110",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),e.jsxs("form",{onSubmit:z(O),className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx("img",{src:`https://api.rabbit.ps/uploads/${a}`,alt:r.name,className:"h-24 w-24 rounded-lg border border-gray-200 object-contain shadow dark:border-gray-700"}),e.jsx("span",{className:"text-lg font-bold text-gray-800 dark:text-gray-100",children:r.name}),e.jsxs($,{className:"items-center gap-1",children:[e.jsx("img",{src:"/Layer_1.svg",alt:"shekel",className:"mt-2 h-3 w-3"}),e.jsx("span",{className:"gap-1 font-NotoSerif text-2xl text-slate-200",children:o})]})]}),e.jsxs("div",{className:"flex flex-row gap-2",children:[e.jsx("label",{className:"font-medium text-gray-700 dark:text-gray-200",children:"اللون:"}),e.jsx("div",{className:"flex flex-row-reverse flex-wrap justify-end gap-2",children:s.map((g,F)=>e.jsxs("button",{type:"button",disabled:!g.isAvailable,className:`relative flex items-center gap-1 rounded-lg border px-2 py-1 transition-all ${g.isAvailable?P===g.name?"border-blue-500 bg-blue-50 dark:bg-blue-900/40":"border-gray-200 hover:border-gray-300 dark:border-gray-700":"cursor-not-allowed border-gray-300 bg-gray-100 opacity-50 dark:border-gray-600 dark:bg-gray-800"}`,onClick:()=>H(g),children:[e.jsx("img",{src:h(g.imgColor),alt:g.name,className:`h-6 w-6 rounded-full border border-gray-300 object-cover dark:border-gray-600 ${g.isAvailable?"":"grayscale"}`}),e.jsx("span",{className:`text-xs font-bold ${g.isAvailable?"text-gray-700 dark:text-gray-200":"text-gray-400 line-through dark:text-gray-500"}`,children:g.name}),!g.isAvailable&&e.jsx("span",{className:"absolute -right-1 -top-1 text-xs font-bold text-red-500",children:"✕"})]},g.name||F))}),E.color&&e.jsx("span",{className:"text-xs text-red-500",children:E.color.message})]}),e.jsxs("div",{className:"flex flex-row gap-2",children:[e.jsx("label",{className:"font-medium text-gray-700 dark:text-gray-200",children:"المقاس:"}),e.jsx("div",{className:"flex flex-row-reverse flex-wrap justify-end gap-2",children:n.map((g,F)=>e.jsxs("button",{type:"button",disabled:!g.isAvailable,className:`relative rounded-lg border px-3 py-1 text-sm font-bold transition-all ${g.isAvailable?I===g.size?"border-blue-500 bg-blue-50 text-blue-700 dark:bg-blue-900/40 dark:text-blue-200":"border-gray-200 text-gray-700 hover:border-gray-300 dark:border-gray-700 dark:text-gray-200":"cursor-not-allowed border-gray-300 bg-gray-100 text-gray-400 line-through opacity-50 dark:border-gray-600 dark:bg-gray-800 dark:text-gray-500"}`,onClick:()=>X(g),children:[g.size,!g.isAvailable&&e.jsx("span",{className:"absolute -right-1 -top-1 text-xs font-bold text-red-500",children:"✕"})]},g.size||F))}),E.size&&e.jsx("span",{className:"text-xs text-red-500",children:E.size.message})]}),e.jsxs("div",{className:"flex flex-row gap-2",children:[e.jsx("label",{className:"font-medium text-gray-700 dark:text-gray-200",children:"الكمية:"}),e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx("button",{type:"button",disabled:!u||d===0||v<=1,className:`flex h-8 w-8 items-center justify-center rounded-full border border-gray-300 bg-gray-100 text-xl font-bold text-gray-700 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-200 ${!u||d===0||v<=1?"cursor-not-allowed opacity-50":""}`,onClick:()=>V(v-1),children:"-"}),e.jsx("input",{...k("quantity",{required:"الكمية مطلوبة",min:{value:1,message:"الكمية يجب أن تكون 1 على الأقل"},max:{value:d||1,message:`الكمية لا يمكن أن تتجاوز ${d||0}`},valueAsNumber:!0}),type:"text",min:1,max:d||1,disabled:!u||d===0,className:`w-16 rounded-lg border border-gray-400 bg-white px-2 py-1 text-center font-Lato text-[15px] text-gray-700 shadow-sm transition-all focus:ring-2 focus:ring-blue-200 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-200 dark:focus:ring-blue-800 ${!u||d===0?"cursor-not-allowed opacity-50":""}`}),e.jsx("button",{type:"button",disabled:!u||d===0||v>=d,className:`flex h-8 w-8 items-center justify-center rounded-full border border-gray-300 bg-gray-100 text-xl font-bold text-gray-700 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-200 ${!u||d===0||v>=d?"cursor-not-allowed opacity-50":""}`,onClick:()=>V(v+1),children:"+"}),e.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:["المتوفر: ",d]})]}),E.quantity&&e.jsx("span",{className:"text-xs text-red-500",children:E.quantity.message})]}),e.jsxs("div",{className:"mt-4 flex flex-row-reverse gap-2",children:[e.jsx("button",{type:"button",onClick:S,className:"min-h-[44px] w-1/2 rounded-lg border border-gray-300 bg-gray-100 p-1 text-sm font-medium text-gray-700 transition-all duration-200 hover:border-gray-400 hover:bg-gray-200 dark:border-gray-600 dark:bg-gray-800 dark:text-gray-300 dark:hover:border-gray-500 dark:hover:bg-gray-700",children:"متابعة التسوق"}),e.jsx("button",{type:"submit",disabled:!u||d===0,className:`flex min-h-[44px] w-1/2 items-center justify-center gap-2 rounded-lg p-1 text-sm font-bold text-white shadow-md transition-all duration-200 ${!u||d===0?"cursor-not-allowed bg-gray-400":"bg-blue-600 hover:bg-blue-700 hover:shadow-lg"}`,children:!u||d===0?"غير متوفر":"أضف الى السلة"})]})]})]})}),e.jsx("div",{className:"fixed inset-0 z-40",onClick:S})]})}),Jt=m.memo(function({color:r,imageUrl:a,isSelected:o,productName:s,onColorSelect:n}){return e.jsx("img",{src:a,className:`mx-auto aspect-square h-10 w-10 cursor-pointer rounded-full object-cover ${o?"border-2 border-blue-500 shadow-md":"border border-gray-200"}`,alt:`${s} - Color ${r.name}`,loading:"lazy",onClick:()=>n(r)})}),Gt=(t,r)=>{if(!t.length)return r??0;const a=t.map(s=>s.price).filter(s=>s!=null);if(!a.length)return r??0;const o=[...new Set(a)];return o.length===1?o[0]:`${Math.min(...a)}-${Math.max(...a)}`},Yt=(t,r)=>t.length?t[0].price:r??0,er=(t,r)=>{var a;return t||((a=r[0])==null?void 0:a.imgColor)||"product.png"},tr=(t,r,a)=>{if(!a)return t.map(s=>({...s,isAvailable:!0,quantity:0}));const o=r.find(s=>s.sizeName===a);return o!=null&&o.quantities?t.map(s=>{const n=o.quantities.find(i=>i.colorName.trim()===s.name.trim());return{...s,isAvailable:n&&n.quantity>0,quantity:(n==null?void 0:n.quantity)||0}}):t.map(s=>({...s,isAvailable:!0,quantity:0}))},rr=(t,r,a)=>a?t.map(o=>{const s=r.find(i=>i.sizeName===o);if(!(s!=null&&s.quantities))return{size:o,isAvailable:!1,quantity:0};const n=s.quantities.find(i=>i.colorName.trim()===a.trim());return{size:o,isAvailable:n&&n.quantity>0,quantity:(n==null?void 0:n.quantity)||0}}):t.map(o=>({size:o,isAvailable:!0,quantity:0})),ar=(t,r,a)=>{var n;const o=t.find(i=>i.sizeName===r),s=(n=o==null?void 0:o.quantities)==null?void 0:n.find(i=>i.colorName.trim()===a.trim());return(s==null?void 0:s.quantity)||0},sr=(t,r,a)=>{var n;const o=t.find(i=>i.sizeName===r),s=(n=o==null?void 0:o.quantities)==null?void 0:n.find(i=>i.colorName.trim()===a.trim());return s?s.colorName:a},or=(t,r)=>({availableSizes:t.map(a=>a.sizeName),availableColors:r.map(a=>a.name)}),he=(t=[],r=[],a)=>{if(t===r)return!0;if(!t||!r||t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(a(t[o])!==a(r[o]))return!1;return!0},nr=({price:t,sizeDetails:r=[],colors:a=[],imgCover:o,name:s,id:n})=>{const i=m.useMemo(()=>er(o,a),[o,a]),[l,c]=m.useState(i),[d,u]=m.useState(!1);m.useEffect(()=>c(i),[i]);const h=m.useMemo(()=>Gt(r,t),[r,t]),x=m.useMemo(()=>Yt(r,t),[r,t]),[f,C]=m.useState(!1),j=m.useMemo(()=>{var w;return((w=a[0])==null?void 0:w.name)||""},[a]),S=m.useMemo(()=>{var w;return((w=r[0])==null?void 0:w.sizeName)||""},[r]),[k,z]=m.useState(j),[b,M]=m.useState(S),[E,v]=m.useState(1),P=m.useMemo(()=>r.map(w=>w.sizeName),[r]),I=m.useMemo(()=>tr(a,r,b),[a,r,b]),O=m.useMemo(()=>rr(P,r,k),[P,r,k]),H=m.useMemo(()=>ar(r,b,k),[r,b,k]),X=m.useMemo(()=>H>0,[H]),V=m.useCallback(w=>{const q=sr(r,b,w.name);z(q),u(!1),c(w.imgColor),v(1)},[r,b]),g=m.useCallback(w=>{M(w),v(1)},[]),F=m.useCallback(()=>u(!0),[]),oe=m.useCallback(()=>u(!0),[]);return m.useEffect(()=>{if(b){const w=O.find(q=>q.size===b);if(w&&!w.isAvailable){const q=O.find(ne=>ne.isAvailable);q&&(M(q.size),v(1))}}},[b,O]),m.useEffect(()=>{if(k){const w=I.find(q=>q.name===k);if(w&&!w.isAvailable){const q=I.find(ne=>ne.isAvailable);q&&(z(q.name),c(q.imgColor),v(1))}}},[k,I]),{photo:l,imageLoaded:d,modalOpen:f,selectedColor:k,selectedSize:b,quantity:E,priceDisplay:h,defaultPrice:x,colorsWithAvailability:I,sizesWithAvailability:O,maxQty:H,isCurrentCombinationAvailable:X,setModalOpen:C,setQuantity:v,handleColorSelect:V,handleSizeSelect:g,handleImageLoad:F,handleImageError:oe}},ir=({id:t,name:r,sizeDetails:a,colors:o},{selectedSize:s,selectedColor:n,quantity:i,photo:l,defaultPrice:c},d,u)=>({handleAddToCart:m.useCallback(()=>{var z;const x=a.find(b=>b.sizeName===s);let f=n,C=1;const j=(z=x==null?void 0:x.quantities)==null?void 0:z.find(b=>b.colorName.trim()===n.trim());j&&(f=j.colorName,C=j.quantity);const{availableSizes:S,availableColors:k}=or(a,o);d({productId:t,name:r,sizeName:s,colorName:f,quantity:C,qty:i,image:l,price:c,availableSizes:S,availableColors:k}),u({title:"تمت الإضافة!",description:`تم إضافة المنتج (${r}) إلى السلة بنجاح.`})},[t,r,s,n,i,l,c,a,o,d,u])}),lr=m.memo(function({price:r,sizeDetails:a=[],colors:o=[],imgCover:s,name:n,id:i}){const l=nr({price:r,sizeDetails:a,colors:o,imgCover:s,name:n,id:i}),{photo:c,imageLoaded:d,modalOpen:u,selectedColor:h,selectedSize:x,quantity:f,priceDisplay:C,defaultPrice:j,colorsWithAvailability:S,sizesWithAvailability:k,maxQty:z,isCurrentCombinationAvailable:b,setModalOpen:M,setQuantity:E,handleColorSelect:v,handleSizeSelect:P,handleImageLoad:I,handleImageError:O}=l,{addItem:H}=se(),{addToast:X}=ce?ce():{addToast:()=>{}},{handleAddToCart:V}=ir({id:i,name:n,sizeDetails:a,colors:o},{selectedSize:x,selectedColor:h,quantity:f,photo:c,defaultPrice:j},H,X);return e.jsxs(ze,{children:[e.jsxs(N,{children:[e.jsx(K,{to:`/product/${i}`,className:"flex justify-center",children:e.jsx(Ft,{src:`https://api.rabbit.ps/uploads/${c}`,alt:n,imageloaded:d.toString(),loading:"lazy",onLoad:I,onError:O})}),e.jsx(zt,{children:o.map(g=>{const F=g.imgColor,oe=c===F;return e.jsx(Jt,{color:g,imageUrl:`https://api.rabbit.ps/uploads/${F}`,isSelected:oe,productName:n,onColorSelect:v},g.name)})})]}),e.jsxs(N,{children:[e.jsx(Lt,{className:"w-full overflow-hidden text-ellipsis whitespace-nowrap text-right font-Lato text-[18px] font-normal leading-normal text-black dark:text-white md:text-[20px]",dir:"rtl",children:n}),e.jsxs($,{dir:"rtl",className:"gap-1",children:[e.jsx("img",{src:"/Layer_1.svg",alt:"",className:"mb-[2px] w-3 self-end"}),e.jsx("span",{className:"font-NotoSerif text-[25px] font-semibold text-gray-800 drop-shadow dark:text-white",children:C})]}),e.jsxs(Tt,{type:"button",onClick:g=>{g.preventDefault(),M(!0)},className:"group",children:[e.jsx("span",{className:"font-Lato text-black transition-colors dark:text-white dark:group-hover:text-white",children:"أضف الى السلة"}),e.jsx(Me,{className:"h-5 w-5 text-blue-600 transition-colors group-hover:fill-blue-600 dark:fill-white dark:text-white dark:group-hover:fill-white"})]})]}),u&&e.jsx(Zt,{product:{id:i,name:n,price:r},photo:c,priceDisplay:C,colors:S,sizes:k,selectedColor:h,selectedSize:x,quantity:f,maxQty:z,isCurrentCombinationAvailable:b,getImagePath:g=>`https://api.rabbit.ps/uploads/${g}`,onColorSelect:v,onSizeSelect:P,onQuantityChange:E,onAddToCart:V,onClose:()=>M(!1)})]})},(t,r)=>!(t.id!==r.id||t.price!==r.price||t.imgCover!==r.imgCover||!he(t.colors,r.colors,s=>`${s.name}|${s.imgColor}`)||!he(t.sizeDetails,r.sizeDetails,s=>{var n;return`${s.sizeName}|${s.price}|${((n=s.quantities)==null?void 0:n.length)??0}`}))),ie=m.memo(function({products:r=[],subCategoryId:a,categoryId:o,likeProduct:s=!1}){const n=ke();return e.jsxs(qt,{children:[r==null?void 0:r.map(i=>e.jsx(lr,{id:i.id,name:i.name,price:i.price,imgCover:i.imgCover,colors:i.colors,sizeDetails:i.sizeDetails},i.id??i._id??i.slug)),!s&&e.jsx(ze,{onClick:()=>{n(`/category/${o}`)},className:"group flex min-w-[160px] cursor-pointer flex-row border-2 border-blue-500 hover:border-blue-500 dark:hover:border-blue-500",children:e.jsxs(N,{className:"mx-auto my-auto items-center justify-center",children:[e.jsx("span",{className:"text-Xl text-gray-500 transition-all duration-300 group-hover:text-blue-500 dark:text-gray-400 dark:group-hover:text-blue-500",children:"مشاهدة الكل"}),e.jsx(Re,{className:"h-8 w-8 transition-all duration-300 group-hover:text-blue-500"})]})})]})});function cr(){const t=["/1600.jpg","/whitehero.jpg"],[r,a]=R.useState(0),o=R.useRef(null),s=R.useRef(!1),n=R.useRef(0),i=R.useRef(!1),l=R.useCallback(()=>a(x=>(x+1)%t.length),[t.length]),c=R.useCallback(()=>a(x=>(x-1+t.length)%t.length),[t.length]),d=R.useCallback(x=>{const f=Math.abs(x.deltaX),C=Math.abs(x.deltaY);f<30||f<=C||s.current||(s.current=!0,x.preventDefault(),x.stopPropagation(),x.deltaX>0?l():c(),setTimeout(()=>s.current=!1,500))},[l,c]);R.useEffect(()=>{const x=o.current;if(x)return x.addEventListener("wheel",d,{passive:!1}),()=>x.removeEventListener("wheel",d,{passive:!1})},[d]);const u=x=>{n.current=x.touches[0].clientX,i.current=!1},h=x=>{const f=x.touches[0].clientX-n.current;i.current||Math.abs(f)<50||(f<0?l():c(),i.current=!0)};return e.jsx("div",{className:"flex w-full items-center justify-center px-4 py-2 xl:px-32",children:e.jsx("div",{ref:o,className:"relative w-full",onTouchStart:u,onTouchMove:h,children:e.jsx("div",{className:"flex h-48 w-full items-center justify-center overflow-hidden rounded-3xl bg-gradient-to-r from-white/80 to-purple-100 shadow-xl sm:h-64 md:h-80 lg:h-[32rem]",children:t.map((x,f)=>e.jsx("img",{src:x,alt:`Promotion Banner ${f+1}`,className:`absolute left-0 top-0 size-full transition-opacity duration-700 ease-in-out ${r===f?"pointer-events-auto z-10 opacity-100":"pointer-events-none z-0 opacity-0"}`,loading:"lazy"},f))})})})}function dr(){var s;const{data:t,isLoading:r,error:a}=It();console.log(t);const[o]=m.useState(!1);return e.jsxs("div",{className:"mt-12 md:mt-0",children:[e.jsx(Ct,{}),!o&&e.jsxs(e.Fragment,{children:[e.jsx(cr,{}),r?e.jsx("div",{className:"flex min-h-[200px] items-center justify-center",children:e.jsx("span",{className:"text-gray-500",children:"جاري تحميل البيانات..."})}):a?e.jsx("div",{className:"flex min-h-[200px] items-center justify-center",children:e.jsx("span",{className:"text-red-500",children:a})}):(s=t==null?void 0:t.data)==null?void 0:s.map(n=>{const i=n.products||[];return n.subCategories&&n.subCategories.length>0?n.subCategories.map(l=>{var c,d,u,h,x,f;return e.jsxs("div",{className:"mb-8 lg:mx-12",children:[e.jsx(Y,{name:l.name,idSub:l.id,idCat:((d=(c=n.categories)==null?void 0:c[0])==null?void 0:d.id)||"غير معروف",all:!0}),i.length>0?e.jsx(ie,{products:i,subCategoryId:l.id,subCategoryName:l.name,categoryId:((h=(u=n.categories)==null?void 0:u[0])==null?void 0:h.id)||"غير معروف",categoryName:((f=(x=n.categories)==null?void 0:x[0])==null?void 0:f.name)||"غير معروف"}):e.jsx("div",{className:"flex min-h-[200px] items-center justify-center",children:e.jsx("span",{className:"text-gray-500",children:"لا توجد منتجات في هذه الفئة"})})]},`subcat-${l.id}`)}):n.categories&&n.categories.length>0?n.categories.map(l=>e.jsxs("div",{className:"mb-8 lg:mx-12",children:[e.jsx(Y,{name:l.name,idSub:null,idCat:l.id,all:!0}),i.length>0?e.jsx(ie,{products:i,subCategoryId:null,subCategoryName:l.name,categoryId:l.id,categoryName:l.name}):e.jsx("div",{className:"flex min-h-[200px] items-center justify-center",children:e.jsx("span",{className:"text-gray-500",children:"لا توجد منتجات في هذه الفئة"})})]},`cat-${l.id}`)):e.jsxs("div",{className:"mb-8 lg:mx-12",children:[e.jsx(Y,{name:n.name,idSub:null,idCat:n.id,all:!0}),i.length>0?e.jsx(ie,{products:i,subCategoryId:null,subCategoryName:n.name,categoryId:n.id,categoryName:n.name}):e.jsx("div",{className:"flex min-h-[200px] items-center justify-center",children:e.jsx("span",{className:"text-gray-500",children:"لا توجد منتجات في هذه الفئة"})})]},`collection-${n.id}`)})]}),e.jsx(Ie,{Menubar:o})]})}function ur(){return e.jsxs("div",{className:"flex flex-col gap-[12px] bg-[#000000] px-[16px] pb-[12px] pt-[40px]",children:[e.jsxs(N,{className:"items-center gap-4",children:[e.jsx("img",{className:"w-56",src:"/LogoTwo.svg",alt:""}),e.jsxs($,{children:[e.jsx("a",{href:"https://www.facebook.com/share/1BC3Z1JZgS/",children:e.jsx(De,{className:"h-8 w-8 cursor-pointer text-white transition-all duration-200 hover:scale-110 hover:text-blue-500"})}),e.jsx("a",{href:"https://www.instagram.com/rabbit.clothes1?igsh=NjRjdmdhM3kzcGpz",children:e.jsx(Be,{className:"h-8 w-8 cursor-pointer text-white transition-all duration-200 hover:scale-110 hover:text-pink-500"})}),e.jsx("a",{href:"https://www.tiktok.com/@rabbit.clothes1?_t=ZS-8zViEph8si1&_r=1",children:e.jsx(Oe,{className:"h-8 w-8 cursor-pointer text-white transition-all duration-200 hover:scale-110 hover:text-white"})}),e.jsx("a",{href:"https://wa.me/message/BIWJZGQJHQVOJ1",children:e.jsx(Qe,{className:"h-8 w-8 cursor-pointer text-white transition-all duration-200 hover:scale-110 hover:text-green-500"})})]}),e.jsxs($,{dir:"rtl",className:"duration-400 group mt-4 cursor-pointer justify-center transition-all hover:scale-[1.009]",children:[e.jsx(He,{className:"my-auto hidden h-8 w-8 cursor-pointer group-hover:text-yellow-500 md:flex"}),e.jsx("span",{className:"text-right font-Lato text-[16px] text-[#FAFAFA] md:text-[20px]",children:"موقعنا:"}),e.jsx("span",{className:"text-right font-Lato text-[16px] text-[#FAFAFA] md:text-[20px]",children:"جنين _ شارع الحسبة _ مركز النفاع التجاري الجديد _ أبو غالي سنتر"})]})]}),e.jsx("div",{className:"flex flex-row-reverse justify-center border-t border-white/10 pt-4",children:e.jsxs("span",{className:"align-right px-[6px] py-[4px] text-center font-Lato text-[12px] text-[#FAFAFA] opacity-50",children:[" ","© جميع الحقوق محفوظة 2025"]})})]})}function mr(){const[t,r]=m.useState("dark");return m.useEffect(()=>{t==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[t]),e.jsx("div",{children:e.jsxs(mt,{variant:"outline",className:"group size-9 border-gray-500 data-[state=on]:bg-transparent data-[state=on]:hover:bg-muted",pressed:t==="dark",onPressedChange:()=>r(a=>a==="dark"?"light":"dark"),"aria-label":`Switch to ${t==="dark"?"light":"dark"} mode`,children:[e.jsx(Ve,{size:16,className:"shrink-0 scale-0 opacity-0 transition-all group-data-[state=on]:scale-100 group-data-[state=on]:opacity-100","aria-hidden":"true"}),e.jsx(We,{size:16,className:"absolute shrink-0 scale-100 opacity-100 transition-all group-data-[state=on]:scale-0 group-data-[state=on]:opacity-0","aria-hidden":"true"})]})})}const J="/product";class W{}y(W,"getAll",async(r={limit:100})=>{try{return await p.get(`${J}`,{params:r})}catch(a){throw a}}),y(W,"getOne",async r=>{try{return await p.get(`${J}/${r}`)}catch(a){throw a}}),y(W,"create",async r=>{try{return await p.post(J,r,{headers:{"Content-Type":"multipart/form-data"}})}catch(a){throw a}}),y(W,"update",async(r,a)=>{try{return await p.put(`${J}/${r}`,a,{headers:{"Content-Type":"multipart/form-data"}})}catch(o){throw o}}),y(W,"deleteOne",async r=>{try{return await p.delete(`${J}/${r}`)}catch(a){throw a}});function fe({className:t,ctrl:r}){const[a,o]=m.useState(""),[s,n]=m.useState(!1),i=ke(),{data:l,refetch:c}=U({queryKey:["search-products",a],queryFn:()=>W.getAll({q:a,limit:10})}),{data:d,refetch:u}=U({queryKey:["search-categories",a],queryFn:()=>Se.getAll({q:a,limit:10})});return m.useEffect(()=>{c(),u()},[a,o]),m.useEffect(()=>{const h=x=>{x.key==="k"&&(x.metaKey||x.ctrlKey)&&(x.preventDefault(),n(f=>!f))};return document.addEventListener("keydown",h),()=>document.removeEventListener("keydown",h)},[]),e.jsxs(e.Fragment,{children:[e.jsxs("button",{dir:"rtl",className:xt("shadow-xs inline-flex h-9 w-full rounded-md border border-input bg-background px-3 py-2 text-sm text-foreground outline-none transition-[color,box-shadow] placeholder:text-muted-foreground/70 focus-visible:border-ring focus-visible:ring-[3px] focus-visible:ring-ring/50",t),onClick:()=>n(!s),children:[e.jsxs("span",{dir:"rtl",className:"flex grow items-center",children:[e.jsx(Ue,{className:"-ms-1 me-3 text-muted-foreground/80",size:16,"aria-hidden":"true"}),e.jsx("span",{className:"font-normal text-muted-foreground/70",children:"بحث ..."})]}),e.jsx("kbd",{className:"-me-1 ms-12 inline-flex h-5 max-h-full items-center rounded border bg-background px-1 font-[inherit] text-[0.625rem] font-medium text-muted-foreground/70",children:r?"⌘K":"بحث"})]}),e.jsx(xr,{className:t,open:s,setOpen:n,products:l,categories:d,setQuery:o,navigate:i})]})}function xr({className:t,open:r,setOpen:a,products:o,setQuery:s,navigate:n}){var i;return m.useEffect(()=>{document.body.style.overflow=r?"hidden":"auto";const l=c=>{c.key==="Escape"&&a(!1)};return document.addEventListener("keydown",l),()=>document.removeEventListener("keydown",l)},[r]),e.jsx(e.Fragment,{children:e.jsx("div",{className:["fixed inset-0 z-50 bg-black/50 transition-opacity duration-100","flex h-screen w-full",r?"pointer-events-auto opacity-100":"pointer-events-none opacity-0",t||""].join(" "),children:e.jsx("div",{onMouseDown:l=>l.stopPropagation(),onTouchStart:l=>l.stopPropagation(),className:["mx-auto my-auto flex h-fit max-h-[800px] w-fit gap-0","transition-all duration-100 will-change-transform",r?"translate-y-0 scale-100 opacity-100":"translate-y-2 scale-95 opacity-0"].join(" "),role:"dialog","aria-modal":"true",children:e.jsxs(N,{className:"w-screen gap-0 px-8 lg:w-[450px] lg:px-0",children:[e.jsxs($,{className:"gap-0",children:[e.jsx("button",{className:"rounded-tl-lg bg-slate-900 px-2 text-slate-300",onClick:()=>a(!1),children:e.jsx(Ke,{className:"h-6 w-6"})}),e.jsx("input",{type:"text",dir:"rtl",className:"h-10 w-full rounded-tr-md bg-slate-900 px-6 text-slate-300 outline-0",placeholder:"بحث...",autoFocus:r,onChange:l=>s(l.target.value)})]}),e.jsxs(N,{dir:"rtl",className:["custom-scrollbar max-h-[60vh] w-full overflow-y-auto border-t border-slate-700","flex justify-between rounded-b-md bg-slate-900 px-3 text-white","transition-[opacity,transform] duration-100",r?"translate-y-0 opacity-100":"-translate-y-1 opacity-0"].join(" "),children:[e.jsx("span",{className:"my-2 px-3 font-normal text-muted-foreground/70",children:"المنتجات"}),(i=o==null?void 0:o.data)==null?void 0:i.map(l=>e.jsx(Et,{className:"cursor-pointer dark:hover:bg-slate-700",onClick:()=>{n(`/product/${l.id}`),a(!1)},children:e.jsxs($,{className:"justify-between",children:[e.jsxs(N,{children:[e.jsx("span",{children:l.name}),e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:l.category.name})]}),e.jsx("img",{src:`https://api.rabbit.ps/uploads/${l.imgCover}`,alt:l.name,className:"h-10 w-10 rounded-sm object-cover"})]})},l.id))]})]})})})})}function gr({openInfo:t,setOpenInfo:r}){const[a,o]=m.useState(!1),[s,n]=m.useState(!1);return e.jsxs(N,{children:[e.jsxs("div",{className:"flex flex-col bg-white shadow-sm transition-all dark:bg-gradient-to-br dark:from-gray-900 dark:to-gray-800 dark:shadow-lg",children:[e.jsxs("div",{className:"align-center flex h-16 justify-between border-b border-[#D9D9D9] p-[16px] py-[4px] dark:border-gray-700/70 dark:text-white lg:px-32",children:[e.jsx(K,{to:"/",children:e.jsx("img",{src:s?"/LogoTwo.svg":"/logoOne.svg",alt:"Rabbit Products Logo",className:"md:w-42 mr-4 w-32 drop-shadow-md dark:invert lg:w-52"})}),e.jsx("div",{className:"hidden w-full items-center justify-center gap-[12px] md:flex",children:e.jsx(fe,{className:"w-2/4"})}),e.jsxs("div",{className:"flex items-center justify-center gap-[12px]",children:[e.jsx(hr,{openInfo:t,setOpenInfo:r}),e.jsx(mr,{}),a?e.jsx(Je,{onClick:()=>o(!a),className:"dark:text-white"}):e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",onClick:()=>o(!a),className:"lg:hidden",children:[e.jsx("mask",{id:"mask0_1920_6087",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:"0",y:"0",width:"24",height:"24",children:e.jsx("rect",{width:"24",height:"24",fill:"#D9D9D9"})}),e.jsx("g",{mask:"url(#mask0_1920_6087)",children:e.jsx("path",{d:"M3 18V16H21V18H3ZM3 13V11H21V13H3ZM3 8V6H21V8H3Z",fill:"#535353",className:"dark:fill-white"})})]})]})]}),e.jsx(Ie,{Menubar:a,setMenubar:o})]}),e.jsx("div",{className:"mb-2 flex w-full gap-[12px] px-2 md:hidden",children:e.jsx(fe,{ctrl:!1,className:"w-full bg-white dark:bg-gray-800"})})]})}const pr=Xe(et)`
  & .${Ze.badge} {
    top: -12px;
    right: -6px;
    /* Light mode */
    background-color: #0095ff;
    color: #fff;
    /* Dark mode */
    @media (prefers-color-scheme: dark) {
      background-color: #232323;
      color: #fff;
      border: 1px solid #444;
    }
  }
`;function hr({setOpenInfo:t}){const{totalQty:r}=se();return e.jsxs(Ge,{className:"top-[2px] dark:text-white",children:[e.jsx(Ye,{fontSize:"medium",className:"dark:text-white",onClick:()=>{t(!0)}}),e.jsx(pr,{badgeContent:r,color:"primary",overlap:"circular"})]})}const Q="/optos";class ye{static shipmentType(){return p.get(`${Q}/shipmentType`)}static shipment(){return p.get(`${Q}/shipment`)}static createShipment(r){return p.post(`${Q}/shipment`,r,{headers:{"Content-Type":"application/json"}})}static getCity(){return p.get(`${Q}/city`)}static gitArea(r){return p.get(`${Q}/city/${r}`)}static businessesaddress(){return p.get(`${Q}/businessesaddress`)}static businesses(){return p.get(`${Q}/businesses`)}static getToken(){return p.get(`${Q}/token`)}}const A="/order";class T{}y(T,"getAll",()=>p.get(A)),y(T,"getOne",r=>p.get(`${A}/${r}`)),y(T,"create",r=>p.post(`${A}/create`,r,{headers:{"Content-Type":"application/json"}})),y(T,"readyBy",r=>p.put(`${A}/readyBy/${r}`)),y(T,"toProccess",r=>p.put(`${A}/proccessing/${r}`)),y(T,"toDeliver",r=>p.put(`${A}/delivered/${r}`)),y(T,"toCanceled",r=>p.put(`${A}/cancelled/${r}`)),y(T,"toShipped",r=>p.put(`${A}/shipped/${r}`)),y(T,"update",(r,a)=>p.put(`${A}/update/${r}`,a,{headers:{"Content-Type":"application/json"}})),y(T,"deleteOne",r=>p.delete(`${A}/${r}`));const fr=t=>{const r={consignee_name:t.consignee_name,consignee_phone:t.consignee_phone,consignee_city:t.consignee_city,consignee_area:t.consignee_area,consignee_address:t.consignee_address,items:t.items};return{Res:async()=>{const o=await T.create(r);return console.log(o),o}}},le=_.input`
	border focus:ring-0 focus:outline-none  dark:border-gray-700 rounded-md p-2 px-3 bg-white dark:bg-gray-900   `,be=({placeholder:t,items:r,registerName:a,disabled:o=!1})=>e.jsx(pt,{name:a,render:({field:s})=>e.jsx(tt,{showSearch:!0,placeholder:t,optionFilterProp:"label",value:s.value||void 0,onChange:n=>s.onChange(n),disabled:o,options:r==null?void 0:r.map(n=>({value:n.id,label:n.name})),style:{width:"100%"},className:"select-antd-custom font-Lato",filterOption:(n,i)=>((i==null?void 0:i.label)??"").toLowerCase().includes(n.toLowerCase()),popupClassName:"select-antd-dropdown"})});function yr({openInfo:t,setOpenInfo:r}){const{items:a,updateItemQuantity:o,removeItemByIndex:s,clearCart:n}=se();m.useEffect(()=>{document.body.style.overflow=t?"hidden":"auto"},[t]);const[i,l]=m.useState(!1);return e.jsx("div",{className:`fixed left-0 top-0 z-50 flex h-screen w-full items-center justify-center bg-black/50 transition-all duration-300 ${t?"pointer-events-auto opacity-100":"pointer-events-none opacity-0"}`,onClick:()=>r(!1),children:e.jsx(N,{dir:"rtl",className:"inset-0 mx-auto h-[90vh] max-h-[600px] w-[90%] max-w-[400px] self-auto overflow-auto rounded-3xl border-0 border-gray-200 bg-white p-0 shadow-2xl dark:border-gray-800 dark:bg-gray-900 md:rounded-3xl md:border",onClick:c=>c.stopPropagation(),children:i?e.jsx(br,{setIsPayment:l,clearCart:n,setOpenInfo:r}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"sticky top-0 z-10 border-b border-gray-200 bg-white px-6 py-4 dark:border-gray-800 dark:bg-gray-900",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center space-x-3",children:e.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-full bg-blue-200 dark:bg-blue-900/30",children:e.jsx("svg",{className:"h-4 w-4 text-blue-700 dark:text-blue-400",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M3 1a1 1 0 000 2h1.22l.305 1.222a.997.997 0 00.01.042l1.358 5.43-.893.892C3.74 11.846 4.632 14 6.414 14H15a1 1 0 000-2H6.414l1-1H14a1 1 0 00.894-.553l3-6A1 1 0 0017 3H6.28l-.31-1.243A1 1 0 005 1H3zM16 16.5a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zM6.5 18a1.5 1.5 0 100-3 1.5 1.5 0 000 3z"})})})}),e.jsx("button",{onClick:()=>r(!1),className:"flex h-8 w-8 items-center justify-center rounded-full transition-colors hover:bg-gray-200 dark:hover:bg-gray-800",children:e.jsx("svg",{className:"h-5 w-5 text-gray-600 dark:text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),e.jsx("div",{className:"flex flex-1 flex-col overflow-hidden",children:a.length===0?e.jsxs("div",{className:"flex flex-1 flex-col items-center justify-center px-4 py-8",children:[e.jsx("div",{className:"mb-3 flex h-16 w-16 items-center justify-center rounded-full bg-gray-200 dark:bg-gray-800",children:e.jsx("svg",{className:"h-8 w-8 text-gray-500 dark:text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l-1 12H6L5 9z"})})}),e.jsx("h3",{className:"mb-2 text-base font-medium text-gray-900 dark:text-white",children:"عربة التسوق فارغة"}),e.jsx("p",{className:"mb-4 text-center text-xs text-gray-600 dark:text-gray-400",children:"أضف بعض المنتجات للبدء"}),e.jsx("button",{onClick:()=>r(!1),className:"rounded-lg bg-blue-700 px-4 py-2 text-xs font-medium text-white transition-colors hover:bg-blue-800",children:"متابعة التسوق"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex-1 overflow-y-auto px-3 py-2",children:e.jsx("div",{className:"space-y-2",children:a.map((c,d)=>{var u;return e.jsx("div",{className:"group",children:e.jsxs($,{className:"gap-2 rounded-lg border border-gray-200 bg-white p-2 transition-all duration-200 hover:border-gray-300 hover:shadow-sm dark:border-gray-700/50 dark:bg-gray-800/50 dark:hover:border-gray-600",children:[e.jsxs("div",{className:"relative flex flex-shrink-0 items-center justify-center",children:[e.jsx("img",{src:`https://api.rabbit.ps/uploads/${c.image}`,alt:c.name,className:"my-auto h-8 w-8 rounded-md bg-gray-200 object-contain dark:bg-gray-700"}),e.jsx("div",{className:"absolute -right-1 top-1 flex h-4 w-4 items-center justify-center rounded-full bg-blue-700 text-[10px] text-xs font-bold text-white",children:c.qty})]}),e.jsxs($,{className:"flex min-w-0 flex-1 items-center justify-between",children:[e.jsx($,{children:e.jsxs(N,{children:[e.jsx("span",{className:"mb-1 line-clamp-2 text-sm font-medium leading-tight text-gray-900 dark:text-white lg:text-xl",children:c.name}),e.jsxs($,{className:"items-center",children:[e.jsx("span",{className:"line-clamp-2 text-xs font-medium leading-tight text-gray-900 dark:text-slate-400",children:(u=c.category)==null?void 0:u.name}),e.jsxs($,{className:"h-fit gap-1",children:[e.jsx("span",{className:"line-clamp-2 rounded-full border border-gray-300 bg-blue-50 p-1 px-2 text-xs font-normal leading-tight text-blue-700 dark:border-gray-600 dark:bg-blue-900/30 dark:text-blue-300",children:c.sizeName}),e.jsx("span",{className:"line-clamp-2 rounded-full border border-gray-300 bg-blue-50 p-1 px-2 text-xs font-medium leading-tight text-blue-700 dark:border-gray-600 dark:bg-blue-900/30 dark:text-blue-300",children:c.colorName})]})]})]})}),e.jsxs(N,{className:"mb-2",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:()=>o(d,Math.max(1,c.qty-1)),className:"flex h-6 w-6 items-center justify-center rounded-md bg-gray-200 text-gray-700 transition-colors hover:bg-gray-300 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600",children:e.jsx("svg",{className:"h-3 w-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 12H4"})})}),e.jsx("span",{className:"mx-auto w-8 text-center text-xs font-medium text-gray-900 dark:text-white",children:c.qty}),e.jsx("button",{onClick:()=>o(d,c.qty+1),disabled:c.qty>=(c.quantity||999),className:`flex h-6 w-6 items-center justify-center rounded-md transition-colors ${c.qty>=(c.quantity||999)?"cursor-not-allowed bg-gray-100 text-gray-400 dark:bg-gray-800 dark:text-gray-600":"bg-gray-200 text-gray-700 hover:bg-gray-300 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600"}`,title:c.qty>=(c.quantity||999)?`الكمية المتاحة: ${c.quantity}`:"زيادة الكمية",children:e.jsx("svg",{className:"h-3 w-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})})]}),e.jsx($,{dir:"ltr",className:"justify-center space-x-2",children:e.jsx("button",{onClick:()=>s(d),className:"rounded p-1 transition-colors hover:bg-red-50 dark:hover:bg-red-900/20",title:"حذف من السلة",children:e.jsx(rt.MdDeleteForever,{className:"h-5 w-5 text-red-500"})})})]})]})]})},d)})})}),e.jsx("div",{className:"border-t border-gray-200 bg-white px-3 py-3 dark:border-gray-800 dark:bg-gray-900",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:["المجموع (",a.reduce((c,d)=>c+d.qty,0)," منتج)"]}),e.jsxs("p",{className:"flex text-sm font-semibold text-gray-900 dark:text-white",children:[e.jsx(at.BiShekel,{className:"w-4 self-end"}),e.jsx("span",{className:"font-NotoSerif text-[20px]",children:a.reduce((c,d)=>c+d.price*d.qty,0).toFixed(2)})]})]}),e.jsxs("button",{onClick:()=>l(!0),className:"flex w-full items-center justify-center gap-2 rounded-lg bg-blue-700 px-3 py-2.5 font-medium text-white shadow-sm transition-colors hover:bg-blue-800 disabled:cursor-not-allowed disabled:bg-gray-400 dark:disabled:bg-gray-700",children:[e.jsx("span",{className:"text-sm",children:"اتمام الطلبات"}),e.jsx(we,{className:"h-4 w-4"})]}),e.jsx("button",{onClick:()=>r(!1),className:"w-full py-1.5 text-sm font-medium text-blue-700 transition-colors hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300",children:"متابعة التسوق"})]})})]})})]})})})}function br({setIsPayment:t,clearCart:r,setOpenInfo:a}){const o=Ce({defaultValues:{consignee_city:"",consignee_area:"",consignee_name:"",consignee_phone:"",consignee_address:""}}),{items:s}=se(),{addToast:n}=ce(),{register:i,handleSubmit:l,watch:c,formState:{errors:d}}=o;var u=c("consignee_city");const{data:h=[]}=U({queryKey:["cities"],queryFn:()=>ye.getCity().then(j=>j[0].data)}),{data:x=[],refetch:f}=U({queryKey:["areas",u],queryFn:()=>ye.gitArea(u).then(j=>j[0].data)});m.useEffect(()=>{f()},[u]);const C=async j=>{const S=s.map(b=>({colorName:b.colorName,sizeName:b.sizeName,quantity:b.qty,productId:b.productId})),k={...j,items:S},{Res:z}=fr(k);await z().then(()=>{r(),n({title:"تم بنجاح!",description:"تم إرسال طلبك بنجاح وسيتم التواصل معك قريباً"}),a(!1)}),t(!1)};return e.jsx(ht,{...o,children:e.jsxs("form",{onSubmit:l(C),className:"flex flex-col gap-4",children:[e.jsxs(N,{className:"mt-2 flex flex-col gap-4 overflow-auto px-8 pt-4",children:[e.jsxs(N,{children:[e.jsx("label",{children:"اسم المستخدم"}),e.jsx(le,{type:"text",placeholder:"اسم المستخدم",...i("consignee_name",{required:!0,pattern:{value:/^[a-zA-Zء-ي\s]+$/,message:"اسم المستخدم يجب أن يكون حروف"},setValueAs:j=>(j=j.trim(),j)})})]}),e.jsxs(N,{children:[e.jsx($,{children:e.jsx("label",{children:"رقم الهاتف"})}),e.jsx(le,{type:"text",placeholder:"رقم الهاتف",...i("consignee_phone",{required:!0,pattern:{value:/^[0-9]{10}$/,message:"رقم الهاتف يجب أن يكون 10 أرقام"}})}),d.consignee_phone&&e.jsx("p",{className:"text-xs text-red-500",children:d.consignee_phone.message})]}),e.jsxs(N,{children:[e.jsx("label",{children:"المدينة"}),e.jsx(be,{items:h,placeholder:"المدينة",registerName:"consignee_city"}),e.jsx("label",{children:"المنطقة"}),e.jsx(be,{items:x,disabled:!u,placeholder:"المنطقة",registerName:"consignee_area"})]}),e.jsxs(N,{children:[e.jsx("label",{children:"العنوان تفصيلي"}),e.jsx(le,{type:"text",placeholder:"العنوان",...i("consignee_address")})]})]}),e.jsxs(N,{className:"flex flex-col gap-4 px-8",children:[e.jsxs("button",{type:"submit",className:"mx-auto flex w-full transform items-center justify-center gap-2 rounded-xl border border-blue-600 bg-gradient-to-r from-blue-600 to-blue-700 px-4 py-3 font-semibold text-white shadow-lg transition-all duration-200 hover:scale-[1.02] hover:from-blue-700 hover:to-blue-800 hover:shadow-xl active:scale-[0.98] disabled:cursor-not-allowed disabled:bg-gray-400 dark:border-blue-500 dark:disabled:bg-gray-700",children:[e.jsx(we,{className:"h-5 w-5"}),e.jsx("span",{className:"text-base",children:"إرسال الطلب"})]}),e.jsx("button",{onClick:()=>t(!1),className:"w-full py-2 text-sm font-medium text-blue-600 transition-colors hover:text-blue-400",children:"العودة للسلة"})]})]})})}const jr=({children:t})=>{const[r,a]=m.useState(!1);return e.jsxs("div",{className:"custom-scrollbar flex h-auto flex-col overflow-y-auto",children:[e.jsx("header",{className:"fixed left-0 right-0 top-0 z-50 shadow-md dark:bg-slate-900",children:e.jsx(gr,{openInfo:r,setOpenInfo:a})}),e.jsx("main",{className:"mt-[75px] md:mt-[70px]",children:t}),e.jsx(yr,{openInfo:r,setOpenInfo:a}),e.jsx(ur,{})]})},je={selectedColor:"",selectedSize:"",quantity:1},Le=de({name:"productPage",initialState:je,reducers:{setSelectedColor:(t,r)=>{t.selectedColor=r.payload},setSelectedSize:(t,r)=>{t.selectedSize=r.payload},setSelectedSizeWithColorValidation:(t,r)=>{var i,l,c;const{sizeName:a,product:o}=r.payload;t.selectedSize=a;const s=(i=o.sizeDetails)==null?void 0:i.find(d=>d.sizeName===a);if(!((l=s==null?void 0:s.quantities)==null?void 0:l.find(d=>d.colorName===t.selectedColor&&d.quantity>0))){const d=(c=s==null?void 0:s.quantities)==null?void 0:c.find(u=>u.quantity>0);d?t.selectedColor=d.colorName:t.selectedColor=""}},setQuantity:(t,r)=>{t.quantity=r.payload},handleQuantityChange:(t,r)=>{const{newQuantity:a,maxQuantity:o}=r.payload;a>=1&&a<=o&&(t.quantity=a)},initializeDefaults:(t,r)=>{var n,i,l;const{product:a}=r.payload,o=c=>{var h;const d=(h=a.sizeDetails)==null?void 0:h.find(x=>x.sizeName===c);if(!(d!=null&&d.quantities))return null;const u=d.quantities.find(x=>x.quantity>0);return(u==null?void 0:u.colorName)||null},s=()=>{var c;for(const d of a.sizeDetails||[])if((c=d.quantities)!=null&&c.some(u=>u.quantity>0))return d.sizeName;return null};if(!t.selectedSize&&((n=a.sizeDetails)==null?void 0:n.length)>0){const c=s();c&&(t.selectedSize=c)}if(!t.selectedColor&&t.selectedSize&&((i=a.colors)==null?void 0:i.length)>0){const c=o(t.selectedSize);c&&(t.selectedColor=c)}if(!t.selectedColor&&t.selectedSize&&((l=a.colors)==null?void 0:l.length)>0)for(const c of a.colors){const d=o(t.selectedSize);if(d){t.selectedColor=d;break}}},resetState:()=>je}}),{setSelectedColor:Mr,setSelectedSize:Rr,setSelectedSizeWithColorValidation:Dr,setQuantity:Br,handleQuantityChange:Or,initializeDefaults:Qr,resetState:Hr}=Le.actions,Vr=t=>t.productPage.selectedColor,Wr=t=>t.productPage.selectedSize,Ur=t=>t.productPage.quantity,vr=Le.reducer,ae="favorites",wr=1e3*60*60,Nr=()=>{const t=localStorage.getItem(ae);if(t)try{const{data:r,timestamp:a}=JSON.parse(t);if(Date.now()-a<wr)return r;localStorage.removeItem(ae)}catch(r){console.error("Error parsing favorites from localStorage",r)}return[]},G=t=>{t.length>0?localStorage.setItem(ae,JSON.stringify({data:t,timestamp:Date.now()})):localStorage.removeItem(ae)},kr={favorites:Nr()},Te=de({name:"favorites",initialState:kr,reducers:{addToFavorites:(t,r)=>{const a=r.payload;t.favorites.find(s=>s.productId===a.productId&&s.sizeName===a.sizeName&&s.colorName===a.colorName)||(t.favorites.push({...a,isFavorite:!0}),G(t.favorites))},removeFromFavorites:(t,r)=>{const{productId:a,sizeName:o,colorName:s}=r.payload;t.favorites=t.favorites.filter(n=>!(n.productId===a&&n.sizeName===o&&n.colorName===s)),G(t.favorites)},toggleFavorite:(t,r)=>{const a=r.payload;t.favorites.find(s=>s.productId===a.productId&&s.sizeName===a.sizeName&&s.colorName===a.colorName)?t.favorites=t.favorites.filter(s=>!(s.productId===a.productId&&s.sizeName===a.sizeName&&s.colorName===a.colorName)):t.favorites.push({...a,isFavorite:!0}),G(t.favorites)},clearFavorites:t=>{t.favorites=[],G(t.favorites)},updateCartItemFavoriteStatus:(t,r)=>{const{productId:a,sizeName:o,colorName:s,isFavorite:n}=r.payload,i=t.favorites.find(l=>l.productId===a&&l.sizeName===o&&l.colorName===s);n&&!i?t.favorites.push({productId:a,sizeName:o,colorName:s,isFavorite:!0}):!n&&i&&(t.favorites=t.favorites.filter(l=>!(l.productId===a&&l.sizeName===o&&l.colorName===s))),G(t.favorites)}}}),{addToFavorites:Kr,removeFromFavorites:Xr,toggleFavorite:Zr,clearFavorites:Jr,updateCartItemFavoriteStatus:Gr}=Te.actions,Yr=t=>t.favorites.favorites,ea=t=>t.favorites.favorites.length,ta=(t,r,a,o)=>t.favorites.favorites.some(s=>s.productId===r&&s.sizeName===a&&s.colorName===o),Cr=Te.reducer,Sr=st({reducer:{cart:Xt,productPage:vr,favorites:Cr}}),ve=m.lazy(()=>ue(()=>import("./CategoryPage-CECf8OHy.js"),__vite__mapDeps([0,1,2,3,4,5,6]))),$r=m.lazy(()=>ue(()=>import("./ProductPage-4LxuH352.js"),__vite__mapDeps([7,1,2,5,3,4,6]))),Ir=m.lazy(()=>ue(()=>import("./FavoritePage-aW5jUBFc.js"),__vite__mapDeps([8,1,2,4,5,6]))),qr=new ot({defaultOptions:{queries:{staleTime:60*60*1e3}}});function zr(){return e.jsx(nt,{store:Sr,children:e.jsx(it,{client:qr,children:e.jsxs(dt,{children:[e.jsx(kt,{}),e.jsx(jt,{}),e.jsx(m.Suspense,{fallback:e.jsx(bt,{}),children:e.jsx(jr,{children:e.jsxs(ut,{children:[e.jsx(Z,{path:"/",element:e.jsx(dr,{})}),e.jsx(Z,{path:"/Favorites",element:e.jsx(Ir,{})}),e.jsx(Z,{path:"/category/:categoryId",element:e.jsx(ve,{})}),e.jsx(Z,{path:"/category/:categoryId/:subcategoryId",element:e.jsx(ve,{})}),e.jsx(Z,{path:"/product/:id",element:e.jsx($r,{})})]})})})]})})})}lt.createRoot(document.getElementById("root")).render(e.jsx(m.StrictMode,{children:e.jsx(ct,{children:e.jsx(gt,{children:e.jsx(zr,{})})})}));export{Se as C,lr as P,$ as R,Wr as a,Ur as b,Br as c,Dr as d,Mr as e,N as f,ie as g,Or as h,Qr as i,W as j,Yr as k,ea as l,ta as m,Gr as n,Jr as o,Xr as p,Kr as q,Hr as r,Vr as s,Zr as t,se as u};
