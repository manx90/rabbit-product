import{u as h,C as j,a as v,j as s,L as C,P as y}from"./index-IRPOBk4F.js";import{u as w}from"./useCategoryProducts-k-nRHypn.js";import"./vendor-CbIZvbuk.js";const $=t=>h({queryKey:["subcategories",t],queryFn:async()=>{if(!t)return[];const a=await j.getOne(t);return((a==null?void 0:a.subCategories)||[]).map(r=>({id:r.id||r._id||r,name:r.name||r}))},enabled:!!t,staleTime:60*60*1e3});function E(){const{categoryId:t,subcategoryId:a}=v(),{data:d=[],isLoading:r,error:p}=$(t),{data:n=[],isLoading:u,error:x}=w(t,a);console.log(n);const g=r||u,o=p||x;return s.jsx(s.Fragment,{children:s.jsxs("div",{className:"mt-[45px] md:mt-0 lg:mx-24",children:[s.jsx("div",{dir:"rtl",className:"px-4",children:s.jsx("div",{className:"custom-scrollbar flex flex-row gap-2 overflow-x-auto px-4 py-2 lg:justify-center lg:px-0",children:d.map(e=>s.jsx(C,{to:`/category/${t}/${e.id}`,className:`min-w-fit max-w-fit self-auto rounded-[12px] border px-4 py-2 text-[13px] transition-colors ${a===String(e.id)?"border-blue-500 bg-blue-50 text-blue-500":"border-gray-300 hover:border-blue-500 hover:text-blue-500"}`,children:e.name},`${t}-${e.id}`))})}),s.jsx("div",{className:"m-auto grid w-fit grid-cols-2 items-center justify-center gap-2 p-1 md:flex md:flex-wrap",children:g?s.jsx("div",{className:"w-full text-center",children:"جاري تحميل المنتجات..."}):o?s.jsx("div",{className:"w-full text-center text-red-500",children:(o==null?void 0:o.message)||"فشل في جلب المنتجات."}):n.length===0?s.jsx("div",{className:"w-full text-center",children:"لا توجد منتجات في هذا القسم."}):n.map((e,f)=>{var m;let i=e.imgCover;typeof i=="string"&&i.startsWith("https://api.rabbit.ps/uploads")&&(i=i.replace("https://api.rabbit.ps/uploads",""));const b=((m=e.colors)==null?void 0:m.map(l=>{var c;return{...l,imgColor:(c=l.imgColor)!=null&&c.startsWith("https://api.rabbit.ps/uploads")?l.imgColor.replace("https://api.rabbit.ps/uploads",""):l.imgColor}}))||[];return s.jsx(y,{id:e.id,name:e.name,price:e.price,imgCover:i,colors:b,sizeDetails:e.sizeDetails},e.id||f)})})]})})}export{E as default};
