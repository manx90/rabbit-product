import{u as C,j as e,H as N}from"./vendor-CUEbPlo7.js";import{C as L,P}from"./index-DWOFxk-B.js";import{u as D}from"./useCategoryProducts-DOmCfA9h.js";import{c as E,L as S}from"./router-CHW3atcw.js";import"./utils-Dpy6SecU.js";import"./ui-components-COOuEkzG.js";import"./forms-C74EBmA-.js";const k=r=>C({queryKey:["subcategories",r],queryFn:async()=>{if(!r)return[];const s=await L.getOne(r);return((s==null?void 0:s.subCategories)||[]).map(i=>({id:i.id||i._id||i,name:i.name||i}))},enabled:!!r,staleTime:60*60*1e3});function K(){var g,x;const{categoryId:r,subcategoryId:s}=E(),{data:a=[],isLoading:i,error:f}=k(r),{data:l=[],isLoading:b,error:y}=D(r,s);console.log(l);const h=i||b,n=f||y,m=((g=a.find(t=>t.id===s))==null?void 0:g.name)||((x=a[0])==null?void 0:x.name)||`الفئة ${r}`,d=`${m} - Rabbit Store | متجر الأرانب`,p=`اكتشف أفضل منتجات ${m} في متجر الأرانب. مجموعة واسعة من المنتجات بأسعار مميزة`,w=`${window.location.origin}/category/${r}${s?`/${s}`:""}`;return e.jsxs(e.Fragment,{children:[e.jsxs(N,{children:[e.jsx("title",{children:d}),e.jsx("meta",{name:"description",content:p}),e.jsx("meta",{name:"keywords",content:`${m}, منتجات, تسوق, متجر الأرانب, فئة`}),e.jsx("meta",{property:"og:title",content:d}),e.jsx("meta",{property:"og:description",content:p}),e.jsx("meta",{property:"og:url",content:w}),e.jsx("meta",{property:"og:type",content:"website"}),e.jsx("meta",{property:"og:image",content:`${window.location.origin}/herosec.jpg`}),e.jsx("meta",{name:"twitter:title",content:d}),e.jsx("meta",{name:"twitter:description",content:p}),e.jsx("meta",{name:"twitter:image",content:`${window.location.origin}/herosec.jpg`})]}),e.jsxs("div",{className:"mt-[45px] md:mt-0 lg:mx-24",children:[e.jsx("div",{dir:"rtl",className:"px-4",children:e.jsx("div",{className:"custom-scrollbar flex flex-row gap-2 overflow-x-auto px-4 py-2 lg:justify-center lg:px-0",children:a.map(t=>e.jsx(S,{to:`/category/${r}/${t.id}`,className:`min-w-fit max-w-fit self-auto rounded-[12px] border px-4 py-2 text-[13px] transition-colors ${s===String(t.id)?"border-blue-500 bg-blue-50 text-blue-500":"border-gray-300 hover:border-blue-500 hover:text-blue-500"}`,children:t.name},`${r}-${t.id}`))})}),e.jsx("div",{className:"m-auto grid w-fit grid-cols-2 items-center justify-center gap-2 p-1 md:flex md:flex-wrap",children:h?e.jsx("div",{className:"w-full text-center",children:"جاري تحميل المنتجات..."}):n?e.jsx("div",{className:"w-full text-center text-red-500",children:(n==null?void 0:n.message)||"فشل في جلب المنتجات."}):l.length===0?e.jsx("div",{className:"w-full text-center",children:"لا توجد منتجات في هذا القسم."}):l.map((t,$)=>{var u;let o=t.imgCover;typeof o=="string"&&o.startsWith("https://api.rabbit.ps/uploads")&&(o=o.replace("https://api.rabbit.ps/uploads",""));const v=((u=t.colors)==null?void 0:u.map(c=>{var j;return{...c,imgColor:(j=c.imgColor)!=null&&j.startsWith("https://api.rabbit.ps/uploads")?c.imgColor.replace("https://api.rabbit.ps/uploads",""):c.imgColor}}))||[];return e.jsx(P,{id:t.id,name:t.name,price:t.price,imgCover:o,colors:v,sizeDetails:t.sizeDetails},t.id||$)})})]})]})}export{K as default};
