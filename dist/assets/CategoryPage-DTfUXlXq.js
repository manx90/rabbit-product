import{j as r}from"./react-CRn8Zao8.js";import{C as h,P as j}from"./index-_vm4vGNq.js";import{u as v}from"./useCategoryProducts-CQuA4jSV.js";import{e as C}from"./vendor-DTgBRIKM.js";import{c as y,L as w}from"./router-2uAcJCdL.js";import"./icons-8Wg12eN4.js";import"./react-dom-IKlzEMBT.js";import"./ui-components-CkIUnxJh.js";import"./utils-Dpy6SecU.js";import"./forms-DVD0ZfDi.js";const $=s=>C({queryKey:["subcategories",s],queryFn:async()=>{if(!s)return[];const i=await h.getOne(s);return((i==null?void 0:i.subCategories)||[]).map(t=>({id:t.id||t._id||t,name:t.name||t}))},enabled:!!s,staleTime:60*60*1e3});function k(){const{categoryId:s,subcategoryId:i}=y(),{data:n=[],isLoading:t,error:c}=$(s),{data:m=[],isLoading:u,error:x}=v(s,i);console.log(m);const g=t||u,o=c||x;return r.jsx(r.Fragment,{children:r.jsxs("div",{className:"mt-[45px] md:mt-0 lg:mx-24",children:[r.jsx("div",{dir:"rtl",className:"px-4",children:r.jsx("div",{className:"custom-scrollbar flex flex-row gap-2 overflow-x-auto px-4 py-2 lg:justify-center lg:px-0",children:n.map(e=>r.jsx(w,{to:`/category/${s}/${e.id}`,className:`min-w-fit max-w-fit self-auto rounded-[12px] border px-4 py-2 text-[13px] transition-colors ${i===String(e.id)?"border-blue-500 bg-blue-50 text-blue-500":"border-gray-300 hover:border-blue-500 hover:text-blue-500"}`,children:e.name},`${s}-${e.id}`))})}),r.jsx("div",{className:"m-auto grid w-fit grid-cols-2 items-center justify-center gap-2 p-1 md:flex md:flex-wrap",children:g?r.jsx("div",{className:"w-full text-center",children:"جاري تحميل المنتجات..."}):o?r.jsx("div",{className:"w-full text-center text-red-500",children:(o==null?void 0:o.message)||"فشل في جلب المنتجات."}):m.length===0?r.jsx("div",{className:"w-full text-center",children:"لا توجد منتجات في هذا القسم."}):m.map((e,f)=>{var d;let a=e.imgCover;typeof a=="string"&&a.startsWith("https://api.rabbit.ps/uploads")&&(a=a.replace("https://api.rabbit.ps/uploads",""));const b=((d=e.colors)==null?void 0:d.map(l=>{var p;return{...l,imgColor:(p=l.imgColor)!=null&&p.startsWith("https://api.rabbit.ps/uploads")?l.imgColor.replace("https://api.rabbit.ps/uploads",""):l.imgColor}}))||[];return r.jsx(j,{id:e.id,name:e.name,price:e.price,imgCover:a,colors:b,sizeDetails:e.sizeDetails},e.id||f)})})]})})}export{k as default};
