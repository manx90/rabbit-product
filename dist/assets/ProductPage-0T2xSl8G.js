import{j as e,J,e as _,f as M,r as j,H as O,K as G,M as H}from"./vendor-CUEbPlo7.js";import{s as K,a as Z,b as ee,r as te,i as se,h as W,c as q,d as B,e as X,u as ae,f as D,R as F,g as re}from"./index-DWOFxk-B.js";import{u as ne}from"./ui-components-COOuEkzG.js";import{a as oe,u as ie}from"./useCategoryProducts-DOmCfA9h.js";import{c as le,a as ce}from"./router-CHW3atcw.js";import"./utils-Dpy6SecU.js";import"./forms-C74EBmA-.js";const de=({product:t})=>{const r=`مرحباً!

أرغب بالحصول على مزيد من التفاصيل حول هذا المنتج:

الاسم: ${t.name}
رابط المنتج: ${window.location.href}

شكراً لكم مقدمًا!`,n=`https://api.whatsapp.com/send?phone=972569341491&text=${encodeURIComponent(r)}`;return e.jsx("a",{href:n,target:"_blank",rel:"noopener noreferrer",className:"fixed bottom-4 right-4 z-50 flex items-center justify-center rounded-full bg-green-500 p-4 text-white shadow-lg transition hover:bg-green-600",title:"تواصل عبر واتساب",children:e.jsx(J.FaWhatsapp,{})})};function U(t){return t?t.startsWith("http")?t:`https://api.rabbit.ps/uploads/${t}`:""}const me=()=>{const{id:t}=le(),r=ce(),o=_(),n=M(K),f=M(Z),p=M(ee),{data:c,isLoading:y,error:w}=oe(t),v=(w==null?void 0:w.message)||null;if(j.useEffect(()=>{o(te())},[t,o]),j.useEffect(()=>{c&&o(se({product:c}))},[c,o]),t&&isNaN(parseInt(t)))return setTimeout(()=>{r("/")},2e3),{product:null,loading:!1,error:"Invalid product ID",selectedColor:n,selectedSize:f,quantity:p,setSelectedColor:x=>o(X(x)),setSelectedSize:x=>o(B({sizeName:x,product:c})),setQuantity:x=>o(q(x)),handleQuantityChange:x=>{const u=m(c,f,n);o(W({newQuantity:x,maxQuantity:u}))},colorQuantity:0,prefixImgUrl:U};const m=(d,x,u)=>{var b,$,S;if(!d)return 0;const i=(b=d.sizeDetails)==null?void 0:b.find(N=>N.sizeName===x);return((S=($=i==null?void 0:i.quantities)==null?void 0:$.find(N=>N.colorName===u))==null?void 0:S.quantity)||0},h=m(c,f,n);return{product:c,loading:y,error:v,selectedColor:n,selectedSize:f,quantity:p,setSelectedColor:d=>o(X(d)),setSelectedSize:d=>o(B({sizeName:d,product:c})),setQuantity:d=>o(q(d)),handleQuantityChange:d=>{o(W({newQuantity:d,maxQuantity:h}))},colorQuantity:h,prefixImgUrl:U}};function ke(){var z,s,g,a;const{product:t,selectedColor:r,setSelectedColor:o,selectedSize:n,setSelectedSize:f,quantity:p,handleQuantityChange:c,loading:y,error:w}=me(),{addItem:v}=ae(),{addToast:m}=ne(),[h,C]=j.useState(),d=l=>{o(l),C(null)},x=()=>{var T,Q,R,A;if(!t||!r||!n){m({title:"خطأ في الاختيار",description:"يرجى اختيار اللون والحجم"});return}const l=(T=t.colors)==null?void 0:T.find(L=>L.name===r),k=(Q=t.sizeDetails)==null?void 0:Q.find(L=>L.sizeName===n);if(!k){m({title:"خطأ في المقاس",description:"حجم غير صحيح"});return}let P=1;if(k&&k.quantities){const L=k.quantities.find(Y=>Y.colorName.trim()===r.trim());L&&(P=L.quantity)}const E=((R=t.sizeDetails)==null?void 0:R.map(L=>L.sizeName))||[],I=((A=t.colors)==null?void 0:A.map(L=>L.name))||[],V={...t,productId:t.id,sizeName:n,colorName:r,quantity:P,qty:p,image:(l==null?void 0:l.imgColor)||t.imgCover,price:k.price,availableSizes:E,availableColors:I};v(V),m({title:"تمت الإضافة!",description:`تم إضافة المنتج (${t.name}) إلى السلة بنجاح.`})};if(w)return e.jsxs("div",{className:"flex min-h-screen flex-col items-center justify-center",children:[e.jsx("p",{className:"text-red-500",children:w}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Redirecting to home page..."})]});if(y)return e.jsx("div",{className:"flex min-h-screen flex-col items-center justify-center",children:e.jsx("p",{className:"text-gray-500",children:"Loading product..."})});if(!t)return null;const u=(t==null?void 0:t.name)||"منتج",i=(t==null?void 0:t.description)||`اكتشف ${u} في متجر الأرانب. أفضل الأسعار والجودة المضمونة`,b=(t==null?void 0:t.price)||((s=(z=t==null?void 0:t.sizeDetails)==null?void 0:z[0])==null?void 0:s.price)||0,$=(t==null?void 0:t.imgCover)||((a=(g=t==null?void 0:t.colors)==null?void 0:g[0])==null?void 0:a.imgColor)||"product.png",S=`${window.location.origin}/product/${t==null?void 0:t.id}`,N=`https://api.rabbit.ps/uploads/${$}`;return e.jsxs("div",{children:[e.jsxs(O,{children:[e.jsxs("title",{children:[u," - Rabbit Store | متجر الأرانب"]}),e.jsx("meta",{name:"description",content:i}),e.jsx("meta",{name:"keywords",content:`${u}, منتج, تسوق, متجر الأرانب, ${b} جنيه`}),e.jsx("meta",{property:"og:title",content:`${u} - Rabbit Store`}),e.jsx("meta",{property:"og:description",content:i}),e.jsx("meta",{property:"og:url",content:S}),e.jsx("meta",{property:"og:type",content:"product"}),e.jsx("meta",{property:"og:image",content:N}),e.jsx("meta",{property:"og:image:width",content:"800"}),e.jsx("meta",{property:"og:image:height",content:"800"}),e.jsx("meta",{property:"og:image:alt",content:u}),e.jsx("meta",{property:"product:price:amount",content:b}),e.jsx("meta",{property:"product:price:currency",content:"EGP"}),e.jsx("meta",{name:"twitter:title",content:`${u} - Rabbit Store`}),e.jsx("meta",{name:"twitter:description",content:i}),e.jsx("meta",{name:"twitter:image",content:N}),e.jsx("meta",{name:"twitter:image:alt",content:u}),e.jsx("script",{type:"application/ld+json",children:JSON.stringify({"@context":"https://schema.org","@type":"Product",name:u,description:i,image:N,url:S,brand:{"@type":"Brand",name:"Rabbit Store"},offers:{"@type":"Offer",price:b,priceCurrency:"EGP",availability:"https://schema.org/InStock",seller:{"@type":"Organization",name:"Rabbit Store"}},aggregateRating:{"@type":"AggregateRating",ratingValue:"4.5",reviewCount:"100"}})})]}),e.jsx("div",{className:"relative m-[16px] flex flex-col justify-center gap-2 lg:mt-16",children:e.jsx(xe,{MainImage:h,setMainImage:C,product:t,selectedColor:r,selectedSize:n,quantity:p,onColorSelect:d,onSizeSelect:f,onQuantityChange:c,onAddToCart:x})}),e.jsx(pe,{product:t}),e.jsx(de,{product:t}),e.jsx(ge,{link:t.videoLink})]})}function ue({product:t,selectedColor:r}){var z,s,g;const o=(z=t.colors)==null?void 0:z.find(a=>a.name===r),n=(o==null?void 0:o.imgColor)||t.imgCover||((s=t.images)==null?void 0:s[0]),f=((g=t.colors)==null?void 0:g.map(a=>a.imgColor).filter(Boolean))||[],p=t.images||[],c=[...new Set([...p,...f])],[y,w]=j.useState(0),v=c[y]||n,m=a=>{a&&(a.preventDefault(),a.stopPropagation()),w(l=>l===c.length-1?0:l+1)},h=a=>{a&&(a.preventDefault(),a.stopPropagation()),w(l=>l===0?c.length-1:l-1)},[C,d]=j.useState(null),[x,u]=j.useState(null),i=50,b=a=>{u(null),d(a.targetTouches[0].clientX)},$=a=>{u(a.targetTouches[0].clientX)},S=a=>{if(!C||!x)return;const l=C-x,k=l>i,P=l<-50;k&&m(a),P&&h(a)},N=a=>{const l=c.findIndex(k=>k===a);l!==-1&&w(l)};return j.useEffect(()=>(window.updateCarouselImage=N,()=>{delete window.updateCarouselImage}),[c]),j.useEffect(()=>{const a=l=>{l.key==="ArrowLeft"?h(l):l.key==="ArrowRight"&&m(l)};return window.addEventListener("keydown",a),()=>window.removeEventListener("keydown",a)},[]),e.jsx("div",{className:"relative w-full lg:w-1/2",children:e.jsxs("div",{className:"relative h-[400px] w-full overflow-hidden rounded-2xl bg-white shadow-lg lg:h-[600px]",onTouchStart:b,onTouchMove:$,onTouchEnd:S,onMouseDown:a=>a.preventDefault(),children:[e.jsx("img",{src:`https://api.rabbit.ps/uploads/${v}`,alt:`${t.name} - صورة ${y+1}`,className:"h-full w-full object-contain p-4 transition-all duration-300"}),c.length>1&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:h,onTouchEnd:a=>{a.stopPropagation(),h()},className:"group absolute left-4 top-1/2 flex h-12 w-12 -translate-y-1/2 touch-manipulation items-center justify-center rounded-full bg-white/80 text-gray-800 shadow-lg transition-all duration-200 hover:scale-110 hover:bg-white active:scale-95 active:bg-white/90","aria-label":"الصورة السابقة",style:{touchAction:"manipulation"},children:e.jsx("svg",{className:"h-6 w-6 transition-colors group-hover:text-blue-600 group-active:text-blue-700",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),e.jsx("button",{onClick:m,onTouchEnd:a=>{a.stopPropagation(),m()},className:"group absolute right-4 top-1/2 flex h-12 w-12 -translate-y-1/2 touch-manipulation items-center justify-center rounded-full bg-white/80 text-gray-800 shadow-lg transition-all duration-200 hover:scale-110 hover:bg-white active:scale-95 active:bg-white/90","aria-label":"الصورة التالية",style:{touchAction:"manipulation"},children:e.jsx("svg",{className:"h-6 w-6 transition-colors group-hover:text-blue-600 group-active:text-blue-700",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]})]})})}function xe({product:t,selectedColor:r,selectedSize:o,quantity:n,onColorSelect:f,onSizeSelect:p,onQuantityChange:c,onAddToCart:y,setMainImage:w,MainImage:v}){var b,$,S,N,z;const[m,h]=j.useState(!1),C=j.useRef(null),d=(b=t.sizeDetails)==null?void 0:b.find(s=>s.sizeName===o),x=(d==null?void 0:d.price)||0,u=((S=($=d==null?void 0:d.quantities)==null?void 0:$.find(s=>s.colorName===r))==null?void 0:S.quantity)||0,i=()=>{var g;if(!t.sizeDetails||t.sizeDetails.length<=1)return!1;const s=(g=t.sizeDetails[0])==null?void 0:g.price;return t.sizeDetails.some(a=>a.price!==s)};return e.jsxs("div",{className:"relative mx-2 mt-16 md:mx-0 lg:mt-0",children:[e.jsx("form",{dir:"rtl",className:"mx-auto flex flex-col gap-8 lg:flex-row",children:e.jsxs(D,{className:"w-full gap-4",children:[e.jsxs(F,{className:"w-full flex-col lg:flex-row lg:gap-8",children:[e.jsx(ue,{product:t,selectedColor:r,MainImage:v,setMainImage:w,ref:C}),e.jsxs(D,{className:"gap-8",children:[e.jsxs(D,{className:"gap-4",children:[e.jsx(F,{className:"items-center justify-between",children:e.jsx("span",{dir:"rtl",className:"ml-auto font-Lato text-2xl font-bold text-slate-800 dark:text-white lg:text-2xl",children:t.name})}),e.jsx("span",{dir:"rtl",className:"ml-auto text-[16px] text-[#3e3e3e] dark:text-gray-400",children:t.description}),e.jsxs("span",{dir:"rtl",className:"flex gap-2 rounded-lg font-NotoSerif text-4xl font-semibold tracking-wider text-slate-800 drop-shadow-lg dark:text-white",children:[e.jsx("span",{className:"font-Lato text-[18px] font-semibold text-[#2c2c2c] dark:text-white",children:"السعر :"}),e.jsx("img",{src:"/Layer_1.svg",alt:"شيكل",className:"h-4 w-4 self-end drop-shadow"}),x]})]}),i()&&e.jsxs("div",{className:"ml-auto flex w-fit flex-row-reverse items-end gap-2 rounded-lg border border-[#FFD6D6] bg-[#FFF0F0] px-4 py-2 shadow-sm",children:[e.jsx("svg",{dir:"rtl",className:"mr-auto h-5 w-5 animate-bounce text-[#DF4444]",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v2m0 4h.01M21 12c0 4.97-4.03 9-9 9s-9-4.03-9-9 4.03-9 9-9 9 4.03 9 9z"})}),e.jsxs("span",{dir:"rtl",className:"text-right font-Lato text-[15px] font-semibold text-[#DF4444] md:text-[17px]",children:["ملاحظة:"," ",e.jsx("span",{className:"font-normal",children:"السعر يختلف حسب الحجم"})]})]}),e.jsxs("div",{className:"flex flex-col gap-4 lg:gap-8",children:[e.jsxs("fieldset",{className:"m-0 flex flex-row flex-wrap items-center gap-3 border-0 p-0",children:[e.jsx("span",{className:"mb-2 ml-2 mt-3 max-w-[450px] text-right text-black dark:text-white",children:"القياس :"}),(N=t.sizeDetails)==null?void 0:N.map(s=>{var a;const g=((a=s.quantities)==null?void 0:a.some(l=>l.quantity>0))||!1;return e.jsxs("label",{className:`relative flex h-[44px] min-w-[60px] items-center justify-center rounded-lg border-2 px-4 py-2 font-Lato text-[18px] shadow-sm transition-all duration-200 ${g?o===s.sizeName?"cursor-pointer border-blue-500 bg-blue-50 text-blue-700 ring-2 ring-blue-200":"cursor-pointer border-gray-300 bg-white text-gray-700 hover:border-blue-300 hover:bg-blue-50":"cursor-not-allowed border-gray-300 bg-gray-100 text-gray-400 opacity-50"} `,style:{userSelect:"none"},onClick:l=>{l.preventDefault(),l.stopPropagation(),g&&p(s.sizeName)},children:[e.jsx("input",{type:"radio",name:"size",value:s.sizeName,checked:o===s.sizeName,disabled:!g,onChange:()=>p(s.sizeName),className:"absolute h-0 w-0 opacity-0",tabIndex:0,"aria-label":s.sizeName}),e.jsx("span",{className:"pointer-events-none",children:s.sizeName}),o===s.sizeName&&e.jsx("span",{className:"absolute -left-2 -top-2 flex h-5 w-5 items-center justify-center rounded-full border-2 border-white bg-blue-500 text-xs text-white shadow-md",children:"✓"})]},s.sizeName)}),t.imgSizeChart&&t.imgMeasure&&e.jsxs("button",{type:"button",onClick:s=>{s.preventDefault(),s.stopPropagation(),h(!0)},className:"flex w-fit items-center gap-2 rounded-lg border border-blue-200 bg-blue-50 px-3 py-2 text-sm font-medium text-blue-600 shadow-sm transition-all duration-200 hover:bg-blue-100 hover:text-blue-700 hover:shadow-md dark:border-blue-800 dark:bg-blue-900/30 dark:text-blue-400 dark:hover:bg-blue-900/50 dark:hover:text-blue-300",children:[e.jsx(G,{className:"h-4 w-4"}),e.jsx("span",{children:"اضغط هنا لمعرفة مقاسك"})]})]}),e.jsxs("fieldset",{className:"m-0 flex flex-row flex-wrap items-center justify-start gap-2 border-0 p-0",children:[e.jsx("span",{className:"mb-2 ml-2 mt-2 max-w-[450px] text-right text-black dark:text-white",children:"اللون :"}),(z=t.colors)==null?void 0:z.map(s=>{var k,P,E;const g=(k=t.sizeDetails)==null?void 0:k.find(I=>I.sizeName===o),l=(((E=(P=g==null?void 0:g.quantities)==null?void 0:P.find(I=>I.colorName===s.name))==null?void 0:E.quantity)||0)>0;return e.jsxs("div",{className:"flex flex-col items-center gap-1",children:[e.jsxs("div",{className:`relative flex h-14 w-14 items-center justify-center rounded-lg border-[1px] object-cover p-1 transition ${l?r===s.name?"cursor-pointer border-blue-400":"cursor-pointer border-[#535353]":"cursor-not-allowed border-gray-300 opacity-50"}`,style:{boxSizing:"border-box"},onClick:I=>{I.preventDefault(),I.stopPropagation(),l&&(f(s.name),window.updateCarouselImage&&window.updateCarouselImage(s.imgColor))},children:[e.jsx("input",{type:"radio",name:"color",value:s.name,checked:r===s.name,disabled:!l,onChange:()=>f(s.name),className:"absolute h-0 w-0 opacity-0","aria-label":s.name}),e.jsx("img",{src:`https://api.rabbit.ps/uploads/${s.imgColor}`,alt:s.name,className:"h-full w-full rounded-md object-cover"}),!l&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center rounded-md bg-black/60",children:e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"block px-1 text-center text-xs font-bold text-white",children:"غير متوفر"}),e.jsx("div",{className:"absolute left-0 right-0 top-1/2 h-0.5 -translate-y-1/2 transform bg-red-500"})]})}),r===s.name&&e.jsx("div",{className:"absolute right-1 top-1 flex h-5 w-5 items-center justify-center rounded-full border-2 border-white bg-blue-400",children:e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:e.jsx("path",{d:"M4 8.5L7 11.5L12 5.5",stroke:"white",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})]}),e.jsx("span",{className:"max-w-[56px] truncate text-center text-xs text-black dark:text-white",children:s.name})]},s.name)})]}),r?e.jsxs("div",{className:"my-2 flex flex-row items-center gap-2",children:[e.jsx("span",{dir:"rtl",className:"text-[18px] font-medium text-black dark:text-white",children:"المتوفر :"}),e.jsx("div",{dir:"rtl",className:"flex min-w-[48px] items-center justify-center rounded-full border border-green-400 bg-green-100 px-4 py-1",children:e.jsxs("span",{dir:"rtl",className:"text-[20px] font-bold tracking-widest text-green-600",children:[u," قطع"]})}),e.jsx("span",{className:"mr-2 flex items-center gap-1 text-[14px] text-black dark:text-white"})]}):e.jsx("div",{className:"my-2 flex flex-row items-center gap-2",children:e.jsx("span",{dir:"rtl",className:"text-[18px] font-medium text-red-600 dark:text-red-400",children:"يرجى اختيار لون متوفر"})}),e.jsxs("div",{className:"flex flex-row items-center justify-center gap-2",children:[e.jsxs("div",{className:`flex h-[44px] w-1/2 max-w-[150px] flex-row-reverse items-center justify-between rounded-lg border border-[#E0E0E0] shadow-sm ${r?"bg-[#FAFAFA]":"bg-gray-100 opacity-50"}`,children:[e.jsx("button",{type:"button",onClick:()=>c(n+1),className:"flex h-10 w-10 items-center justify-center rounded-lg p-[4px] py-3 text-xl font-bold text-[#0095FF] transition hover:bg-[#E6F4FF]","aria-label":"زيادة الكمية",tabIndex:0,disabled:!r,children:"+"}),e.jsx("input",{type:"text",name:"quantity",inputMode:"numeric",pattern:"[0-9]*",min:1,max:u,value:n,onChange:s=>{const g=s.target.value.replace(/\D/g,""),a=parseInt(g,10);isNaN(a)||c(a)},className:"w-8 select-none border-none bg-transparent text-center font-Lato text-lg font-semibold text-[#232323] focus:outline-none","aria-label":"الكمية",disabled:!r}),e.jsx("button",{type:"button",onClick:()=>c(n>1?n-1:1),className:"flex h-10 w-10 items-center justify-center rounded-lg text-xl font-bold text-[#DF4444] transition hover:bg-[#FFF0F0]","aria-label":"إنقاص الكمية",disabled:n<=1||!r,tabIndex:0,children:"-"})]}),e.jsxs("button",{type:"button",onClick:y,className:`group flex h-[44px] w-1/2 flex-row-reverse items-center justify-center gap-[4px] rounded-lg border-2 border-solid p-[4px] py-3 shadow transition-colors ${r?"border-[#ecebebf0] bg-[#fefefe] hover:bg-blue-50 dark:border-blue-800 dark:bg-gradient-to-r dark:from-blue-900 dark:to-blue-700 dark:hover:bg-blue-800/80":"cursor-not-allowed border-gray-300 bg-gray-100 opacity-50"}`,disabled:!r,children:[e.jsx("span",{className:`font-Lato transition-colors ${r?"text-black dark:text-white dark:group-hover:text-white":"text-gray-500"}`,children:"أضف الى السلة"}),e.jsx(H,{className:`h-5 w-5 transition-colors ${r?"text-blue-600 group-hover:fill-blue-600 dark:fill-white dark:text-white dark:group-hover:fill-white":"text-gray-500"}`})]})]})]})]})]}),t.imgSizeChart&&t.imgMeasure&&e.jsx(he,{product:t,openDimensions:m,setOpenDimensions:h})]})}),e.jsxs(D,{dir:"rtl",className:"mx-auto mt-4 justify-center gap-10 border-y border-gray-200 p-4 dark:border-gray-700 lg:flex-row",children:[e.jsxs("div",{className:"mx-auto flex w-64 flex-col items-center justify-center",children:[e.jsx("img",{src:"/okOrder.svg",alt:"",className:"text-blue h-20 w-20"}),e.jsx(F,{children:e.jsx("span",{className:"py-3 text-[20px] font-semibold text-[#535353] dark:text-white",children:"الدفع والتوصيل:"})}),e.jsx("span",{className:"text-center text-[14px] text-gray-500 dark:text-gray-300",children:"ببساطة نقوم بايصال المنتج لغاية منزلك وتقوم بدفع الثمن لموظف التوصيل."})]}),e.jsxs("div",{className:"mx-auto flex w-64 flex-col items-center justify-center",children:[e.jsx("img",{src:"/return.svg",alt:"",className:"h-20 w-20"}),e.jsx("span",{className:"py-3 text-[20px] font-semibold text-[#535353] dark:text-white",children:"التبديل:"}),e.jsx("span",{className:"text-center text-[14px] text-gray-500 dark:text-gray-300",children:"تواصل معنا عبر رسائل الواتس اب لإتمام عملية التبديل و نقوم بايصال المنتج ل باب منزلك مع دفع أجرة التوصيل ."})]}),e.jsxs("div",{className:"mx-auto flex w-64 flex-col items-center justify-center",children:[e.jsx("img",{src:"/offOrder.svg",alt:"",className:"h-20 w-20"}),e.jsx("span",{className:"py-3 text-[20px] font-semibold text-[#535353] dark:text-white",children:"الغاء الطلب:"}),e.jsx("span",{className:"text-center text-[14px] text-gray-500 dark:text-gray-300",children:"بعد إتمام طلبك و اردت إلغاء الطلب تواصل معنا عبر الواتس اب ل إلغاء الطلب"})]})]})]})}function pe({product:t}){const{data:o=[],isLoading:n,error:f}=ie(t.category.id,t.subCategory.id,10),p=o.map(c=>{var v;let y=c.imgCover;typeof y=="string"&&y.startsWith("https://api.rabbit.ps/uploads")&&(y=y.replace("https://api.rabbit.ps/uploads",""));const w=((v=c.colors)==null?void 0:v.map(m=>{var h;return{...m,imgColor:(h=m.imgColor)!=null&&h.startsWith("https://api.rabbit.ps/uploads")?m.imgColor.replace("https://api.rabbit.ps/uploads",""):m.imgColor}}))||[];return{...c,imgCover:y,colors:w}});return e.jsxs(D,{className:"mr-4",children:[e.jsx("span",{dir:"rtl",className:"text-2xl font-medium text-black dark:text-white lg:text-[16px]",children:"المنتجات المشابهة"}),e.jsx(re,{products:p,subCategoryId:t.subCategory.id,categoryId:t.category.id,likeProduct:!0})]})}function he({product:t,openDimensions:r=!0,setOpenDimensions:o}){return!t.imgSizeChart&&!t.imgMeasure?null:e.jsx("div",{className:`fixed left-0 top-0 z-50 flex h-screen w-full items-center justify-center bg-black/50 transition-all duration-300 ${r?"pointer-events-auto opacity-100":"pointer-events-none opacity-0"}`,onClick:n=>{n.preventDefault(),n.stopPropagation(),o(!1)},children:e.jsxs("div",{className:"relative h-[90vh] max-h-[600px] w-[90%] max-w-[400px] overflow-hidden rounded-t-3xl border-0 border-gray-200 bg-white p-4 shadow-2xl dark:border-gray-800 dark:bg-gray-900 md:rounded-3xl md:border",onClick:n=>n.stopPropagation(),children:[e.jsx("button",{onClick:n=>{n.preventDefault(),n.stopPropagation(),o(!1)},className:"absolute left-4 top-4 z-10 flex h-8 w-8 items-center justify-center rounded-full transition-colors hover:bg-gray-200 dark:hover:bg-gray-800",children:e.jsx("svg",{className:"h-5 w-5 text-gray-600 dark:text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),e.jsxs("div",{dir:"rtl",className:"flex h-full flex-col items-center justify-center gap-4",children:[t.imgSizeChart&&e.jsx("img",{src:t.imgSizeChart,alt:"جدول المقاسات",className:"max-h-[45%] max-w-full object-contain"}),t.imgMeasure&&e.jsx("img",{src:t.imgMeasure,alt:"دليل القياسات",className:"max-h-[45%] max-w-full object-contain"})]})]})})}function ge({link:t="https://www.youtube.com/embed/gyMwXuJrbJQ"}){if(t===null)return;const[r,o]=j.useState({x:0,y:96}),[n,f]=j.useState(!1),[p,c]=j.useState({x:0,y:0}),[y,w]=j.useState(!0),v=i=>{i.preventDefault(),i.stopPropagation(),f(!0),c({x:i.clientX-r.x,y:i.clientY-r.y}),document.body.style.overflow="hidden"},m=i=>{n&&(i.preventDefault(),i.stopPropagation(),o({x:i.clientX-p.x,y:i.clientY-p.y}))},h=()=>{f(!1),document.body.style.overflow=""},C=i=>{i.preventDefault(),i.stopPropagation();const b=i.touches[0];f(!0),c({x:b.clientX-r.x,y:b.clientY-r.y}),document.body.style.overflow="hidden"},d=i=>{if(!n)return;i.preventDefault(),i.stopPropagation();const b=i.touches[0];o({x:b.clientX-p.x,y:b.clientY-p.y})},x=()=>{f(!1),document.body.style.overflow=""},u=i=>{i.preventDefault(),i.stopPropagation(),w(!1)};return j.useEffect(()=>(n&&(document.addEventListener("mousemove",m,{passive:!1}),document.addEventListener("mouseup",h),document.addEventListener("touchmove",d,{passive:!1}),document.addEventListener("touchend",x)),()=>{document.removeEventListener("mousemove",m),document.removeEventListener("mouseup",h),document.removeEventListener("touchmove",d),document.removeEventListener("touchend",x),document.body.style.overflow=""}),[n,p]),j.useEffect(()=>()=>{document.body.style.overflow=""},[]),y?e.jsxs("div",{className:`fixed z-50 h-auto w-auto cursor-move select-none rounded-lg ${n?"opacity-80":""}`,style:{left:`${r.x}px`,top:`${r.y}px`,transform:n?"scale(1.05)":"scale(1)",transition:n?"none":"transform 0.2s ease",touchAction:"none"},onMouseDown:v,onTouchStart:C,children:[e.jsx("button",{onClick:u,className:"absolute -right-2 -top-2 z-10 flex h-6 w-6 cursor-pointer items-center justify-center rounded-full bg-white shadow-md hover:bg-gray-100",children:e.jsx("svg",{className:"h-4 w-4 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),e.jsx("div",{className:"relative h-40 w-28 overflow-hidden rounded-lg",style:{pointerEvents:"none"},children:e.jsx("iframe",{className:"absolute left-0 top-0 h-40 w-28",src:`${t}?autoplay=1&mute=1&loop=1&modestbranding=1&rel=0&iv_load_policy=3&playsinline=1`,title:"YouTube video",allow:"autoplay; encrypted-media",muted:!0})})]}):null}export{ke as default};
