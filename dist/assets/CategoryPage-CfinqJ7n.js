import{u as h,j as s}from"./vendor-Bsya6xGM.js";import{C as j,P as v}from"./index-Lh2YQVmj.js";import{u as C}from"./useCategoryProducts-CIzzM-fY.js";import{c as y,L as w}from"./router-CDCu6XLE.js";import"./utils-Dpy6SecU.js";import"./ui-components-37t6zyAt.js";import"./forms-DicVIi4w.js";const $=r=>h({queryKey:["subcategories",r],queryFn:async()=>{if(!r)return[];const i=await j.getOne(r);return((i==null?void 0:i.subCategories)||[]).map(t=>({id:t.id||t._id||t,name:t.name||t}))},enabled:!!r,staleTime:60*60*1e3});function F(){const{categoryId:r,subcategoryId:i}=y(),{data:d=[],isLoading:t,error:p}=$(r),{data:n=[],isLoading:u,error:x}=C(r,i);console.log(n);const g=t||u,o=p||x;return s.jsx(s.Fragment,{children:s.jsxs("div",{className:"mt-[45px] md:mt-0 lg:mx-24",children:[s.jsx("div",{dir:"rtl",className:"px-4",children:s.jsx("div",{className:"custom-scrollbar flex flex-row gap-2 overflow-x-auto px-4 py-2 lg:justify-center lg:px-0",children:d.map(e=>s.jsx(w,{to:`/category/${r}/${e.id}`,className:`min-w-fit max-w-fit self-auto rounded-[12px] border px-4 py-2 text-[13px] transition-colors ${i===String(e.id)?"border-blue-500 bg-blue-50 text-blue-500":"border-gray-300 hover:border-blue-500 hover:text-blue-500"}`,children:e.name},`${r}-${e.id}`))})}),s.jsx("div",{className:"m-auto grid w-fit grid-cols-2 items-center justify-center gap-2 p-1 md:flex md:flex-wrap",children:g?s.jsx("div",{className:"w-full text-center",children:"جاري تحميل المنتجات..."}):o?s.jsx("div",{className:"w-full text-center text-red-500",children:(o==null?void 0:o.message)||"فشل في جلب المنتجات."}):n.length===0?s.jsx("div",{className:"w-full text-center",children:"لا توجد منتجات في هذا القسم."}):n.map((e,f)=>{var m;let a=e.imgCover;typeof a=="string"&&a.startsWith("https://api.rabbit.ps/uploads")&&(a=a.replace("https://api.rabbit.ps/uploads",""));const b=((m=e.colors)==null?void 0:m.map(l=>{var c;return{...l,imgColor:(c=l.imgColor)!=null&&c.startsWith("https://api.rabbit.ps/uploads")?l.imgColor.replace("https://api.rabbit.ps/uploads",""):l.imgColor}}))||[];return s.jsx(v,{id:e.id,name:e.name,price:e.price,imgCover:a,colors:b,sizeDetails:e.sizeDetails},e.id||f)})})]})})}export{F as default};
